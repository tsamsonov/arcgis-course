<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Упражнение 13 Гидрографические сети | Основы геоинформатики: практикум в ArcGIS</title>
<meta name="author" content="Тимофей Самсонов">
<meta name="description" content="Скачать данные и файл отчета  13.1 Введение Цель задания — научиться моделировать речную сеть с помощью геометрических методов. Параметр Значение Теоретическая подготовка Сетевая модель данных,...">
<meta name="generator" content="bookdown 0.42 with bs4_book()">
<meta property="og:title" content="Упражнение 13 Гидрографические сети | Основы геоинформатики: практикум в ArcGIS">
<meta property="og:type" content="book">
<meta property="og:description" content="Скачать данные и файл отчета  13.1 Введение Цель задания — научиться моделировать речную сеть с помощью геометрических методов. Параметр Значение Теоретическая подготовка Сетевая модель данных,...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Упражнение 13 Гидрографические сети | Основы геоинформатики: практикум в ArcGIS">
<meta name="twitter:description" content="Скачать данные и файл отчета  13.1 Введение Цель задания — научиться моделировать речную сеть с помощью геометрических методов. Параметр Значение Теоретическая подготовка Сетевая модель данных,...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.9.0/transition.js"></script><script src="libs/bs3compat-0.9.0/tabs.js"></script><script src="libs/bs3compat-0.9.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="default">
<link rel="stylesheet" href="custom.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Основы геоинформатики: практикум в ArcGIS</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Введение</a></li>
<li class="book-part">Визуализация данных</li>
<li><a class="" href="map-design-quaternary.html"><span class="header-section-number">1</span> Карта четвертичных отложений</a></li>
<li><a class="" href="map-design-general.html"><span class="header-section-number">2</span> Общегеографическая карта</a></li>
<li><a class="" href="map-design-climates.html"><span class="header-section-number">3</span> Климатическая карта</a></li>
<li><a class="" href="map-design-economic.html"><span class="header-section-number">4</span> Социально-экономическая карта</a></li>
<li class="book-part">Базовые технологии ГИС</li>
<li><a class="" href="map-ref-general.html"><span class="header-section-number">5</span> Привязка и векторизация (туристская карта)</a></li>
<li><a class="" href="map-ref-hydrogeologic.html"><span class="header-section-number">6</span> Привязка и векторизация (гидрогеологическая карта)</a></li>
<li><a class="" href="map-ref-economic.html"><span class="header-section-number">7</span> Привязка и векторизация (административная карта)</a></li>
<li><a class="" href="stat-map-economic.html"><span class="header-section-number">8</span> Соединение табличных данных</a></li>
<li><a class="" href="geocoding.html"><span class="header-section-number">9</span> Адресное геокодирование</a></li>
<li class="book-part">Векторный анализ</li>
<li><a class="" href="overlay.html"><span class="header-section-number">10</span> Пространственные взаимосвязи</a></li>
<li><a class="" href="land-cover-hydro.html"><span class="header-section-number">11</span> Пространственные соотношения</a></li>
<li><a class="" href="network-analysis.html"><span class="header-section-number">12</span> Транспортные сети</a></li>
<li><a class="active" href="network-hydro.html"><span class="header-section-number">13</span> Гидрографические сети</a></li>
<li class="book-part">Растровый анализ</li>
<li><a class="" href="weighted-overlay.html"><span class="header-section-number">14</span> Оптимизация местоположения</a></li>
<li><a class="" href="dem.html"><span class="header-section-number">15</span> Цифровое моделирование рельефа</a></li>
<li class="book-part">Пространственное моделирование</li>
<li><a class="" href="density-analysis.html"><span class="header-section-number">16</span> Оценка плотности распределения</a></li>
<li><a class="" href="interpolation.html"><span class="header-section-number">17</span> Пространственная интерполяция</a></li>
<li><a class="" href="threed-modelling.html"><span class="header-section-number">18</span> Трехмерное моделирование</a></li>
<li class="book-part">Описание функций</li>
<li><a class="" href="manual-catalog.html"><span class="header-section-number">A</span> Работа с окном каталога</a></li>
<li><a class="" href="manual-toolbox.html"><span class="header-section-number">B</span> Геообработка</a></li>
<li><a class="" href="manual-gdb.html"><span class="header-section-number">C</span> База геоданных</a></li>
<li><a class="" href="manual-toc.html"><span class="header-section-number">D</span> Работа с таблицей слоев</a></li>
<li><a class="" href="manual-toolbar.html"><span class="header-section-number">E</span> Панели инструментов</a></li>
<li><a class="" href="manual-navigation.html"><span class="header-section-number">F</span> Навигация по карте</a></li>
<li><a class="" href="manual-vector.html"><span class="header-section-number">G</span> Оформление векторного слоя</a></li>
<li><a class="" href="manual-raster.html"><span class="header-section-number">H</span> Оформление растрового слоя</a></li>
<li><a class="" href="manual-labels.html"><span class="header-section-number">I</span> Подписи объектов</a></li>
<li><a class="" href="manual-attributes.html"><span class="header-section-number">J</span> Атрибутивная таблица</a></li>
<li><a class="" href="manual-select.html"><span class="header-section-number">K</span> Выборка объектов</a></li>
<li><a class="" href="manual-projections.html"><span class="header-section-number">L</span> Проекции и координатная сетка</a></li>
<li><a class="" href="manual-georef.html"><span class="header-section-number">M</span> Привязка растровых данных</a></li>
<li><a class="" href="manual-edit.html"><span class="header-section-number">N</span> Редактирование</a></li>
<li><a class="" href="manual-layout.html"><span class="header-section-number">O</span> Компоновка карт</a></li>
<li><a class="" href="manual-legend.html"><span class="header-section-number">P</span> Легенда карты</a></li>
<li><a class="" href="manual-export.html"><span class="header-section-number">Q</span> Экспорт изображения</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="network-hydro" class="section level1" number="13">
<h1>
<span class="header-section-number">Упражнение 13</span> Гидрографические сети<a class="anchor" aria-label="anchor" href="#network-hydro"><i class="fas fa-link"></i></a>
</h1>
<p><a href="https://github.com/tsamsonov/arcgis-course/raw/refs/heads/master/data/Ex13.zip">Скачать данные и файл отчета</a></p>
<div id="network-hydro-intro" class="section level2" number="13.1">
<h2>
<span class="header-section-number">13.1</span> Введение<a class="anchor" aria-label="anchor" href="#network-hydro-intro"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Цель задания</strong> — научиться моделировать речную сеть с помощью геометрических методов.</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Теоретическая подготовка</em></td>
<td>Сетевая модель данных, сетевой анализ, определение кратчайшего маршрута.</td>
</tr>
<tr class="even">
<td align="left"><em>Практическая подготовка</em></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Работы с базой пространственных данных. Настройка символики и подписей объектов.</td>
</tr>
<tr class="odd">
<td align="left"><em>Исходные данные</em></td>
<td>База данных ГИС “Сатино”.</td>
</tr>
<tr class="even">
<td align="left"><em>Результат</em></td>
<td>Набор данных геометрической сети в базе пространственных данных. Результаты сетевого анализа</td>
</tr>
<tr class="odd">
<td align="left"><em>Ключевые слова</em></td>
<td>Геометрические сети, сетевой анализ</td>
</tr>
</tbody>
</table></div>
<div id="network-hydro-control" class="section level3" number="13.1.1">
<h3>
<span class="header-section-number">13.1.1</span> Контрольный лист<a class="anchor" aria-label="anchor" href="#network-hydro-control"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Добавить на карту слои линейной и площадной гидрографии</li>
<li>Оцифровать недостающие сегменты линейного слоя гидрографии</li>
<li>Разрезать линейный слой гидрографии в узлах сочленения водотоков</li>
<li>Построить геометрическую сеть на основе полученного линейного слоя</li>
<li>Выполнить упражнения по анализу построенной геометрической сети</li>
</ul>
</div>
<div id="network-hydro-annotation" class="section level3" number="13.1.2">
<h3>
<span class="header-section-number">13.1.2</span> Аннотация<a class="anchor" aria-label="anchor" href="#network-hydro-annotation"><i class="fas fa-link"></i></a>
</h3>
<p>Речные системы, транспортные и инженерные коммуникации — это примеры пространственных сетей. Сети играют огромную роль в географическом пространстве, их можно найти практически на любой карте, они учитываются в виде факторов во многих географических задачах. Основная функция сетей — перенос вещества и данных. Отличительной особенностью сетей является направленность линейных отрезков и их топологическая связность в местах сочленения, таких как слияния рек, перекрестки дорог, разветвления трубопроводов.</p>
<p>В этом задании вы приобретете навыки по созданию и редактированию линейных и точечных объектов, построите геометрическую сеть речной системы на их основе и научитесь делать простой сетевой анализ — построение маршрутов, трассировка водотоков вверх по течению. Полученные навыки пригодятся при изучении сетей других типов: инженерных и транспортных.</p>
</div>
</div>
<div id="network-hydro-dataset" class="section level2" number="13.2">
<h2>
<span class="header-section-number">13.2</span> Создание набора данных речной сети<a class="anchor" aria-label="anchor" href="#network-hydro-dataset"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-hydro.html#network-hydro">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Откройте <strong>ArcMap</strong>.</p></li>
<li><p>Сохраните карту через команду меню <strong>File &gt; Save</strong> в вашей директории <em>Ex13</em> под именем <em>Ex13_Реки.mxd</em>. Это необходимо для того, чтобы у вас появилась домашняя директория в окне каталога.</p></li>
<li><p>Откройте окно <img src="images/Ex13/image2.png"><strong>Каталога</strong>. Найдите вверху домашнюю директорию <em>Home</em> — это каталог <em>Ex13</em>, куда вы сохранили документ карты.</p></li>
<li><p>Добавьте на карту слои <img src="images/Ex13/image3.png"><em>WaterPolygon</em> и <img src="images/Ex13/image4.png"><em>WaterLine</em> из базы <img src="images/Ex13/image5.png"><em>Satino.gdb</em>.</p></li>
</ol>
<blockquote>
<p>Перед вами два представления речной сети: линейное и площадное. Подумайте, в каких задачах необходимо одно представление, а в каких — другое?</p>
</blockquote>
<p>Чтобы обеспечить связность гидрографической сети, следует преобразовать площадное представление крупных водотоков в линейное. Для этого необходимо вручную оцифровать осевую линию реки, притянуть устья притоков к этой осевой линии, а затем разрезать осевую линию в узлах пересечения (в дальнейшем это позволит при трассировке «сворачивать» с одного водотока на другой).</p>
<ol style="list-style-type: decimal">
<li><p>Щелкните правой кнопкой мыши по домашнему каталогу (Home) и выберите <strong>New &gt; File Geodatabase</strong> для того, чтобы создать новую базу геоданных.</p></li>
<li><p>Назовите ее <em>Ex13.</em></p></li>
<li><p>Щелкните по <em>Ex13.gdb</em> правой кнопкой мыши и выберите пункт <strong>Make Default Geodatabase</strong>. Эта команда указывает системе, что все результаты обработки данных следует помещать в выбранную базу геоданных.</p></li>
<li>
<p>Добавьте в базу геоданных <em>Ex13.gdb</em> новый набор данных <em>Hydro</em>. Для этого щелкните правой кнопкой мыши на названии базы геоданных и в контекстном меню выберите <strong>New &gt; Feature Dataset</strong> (<strong>Рис. 1</strong>).</p>
<div class="float">
<img src="images/Ex13/image6.png" alt="Рис. 1. Создание нового набора данных (Feature Dataset)"><div class="figcaption"><em>Рис. 1. Создание нового набора данных (Feature Dataset)</em></div>
</div>
</li>
<li><p>В появившемся окне введите название набора данных <em>Hydro</em>.</p></li>
<li><p>В следующем окне вам просят задать проекцию. Щелкните на кнопке <img src="images/Ex13/image7.png"><strong>Add Coordinate System</strong> и в ниспадающем меню выберите команду Import. Найдите слой Border базе геоданных Satino.gdb и дважды кликните на нем. Параметры проекции автоматически подставятся из созданного ранее слоя. Убедитесь, что проекция называется <em>WGS_1984_UTM_Zone_37N</em>.</p></li>
<li><p>Нажмите Далее и во всех оставшихся диалогах оставьте параметры по умолчанию.</p></li>
<li><p>Создайте новый класс пространственных объектов <em>Streams</em> внутри набора данных <em>Hydro</em>. Для этого щелкните правой кнопкой мыши по набору данных Hydro и в контекстном меню выберите пункт <strong>New—Feature Class</strong>.</p></li>
<li>
<p>В первом диалоге введите название класса <em>Streams</em>, его псевдоним (alias) <em>Водотоки</em> и из ниспадающего списка выберите тип класса <em>Line Features</em> (<strong>Рис. 2</strong>). Нажмите Далее два раза, чтобы пропустить второй диалог.</p>
<div class="float">
<img src="images/Ex13/image8.png" alt="Рис. 2. Диалог создания линейного класса пространственных объектов"><div class="figcaption"><em>Рис. 2. Диалог создания линейного класса пространственных объектов</em></div>
</div>
<p>В появившемся (третьем) диалоге (<strong>Рис. 3</strong>) вас просят определить состав атрибутивных полей для слоя. Здесь можно сделать это вручную, однако мы воспользуемся импортом.</p>
<div class="float">
<img src="images/Ex13/image9.png" alt="Рис. 3. Определение атрибутивных полей для класса Streams"><div class="figcaption"><em>Рис. 3. Определение атрибутивных полей для класса Streams</em></div>
</div>
</li>
<li><p>Нажмите кнопку <strong>Import</strong> и найдите класс <em>WaterLine</em> в базе геоданных <img src="images/Ex13/image5.png"><em>Satino.gdb</em>, дважды щелкните на нем. Названия и типы полей автоматически подставятся в список (<strong>Рис. 3</strong>).</p></li>
<li><p>Нажмите <strong>Finish</strong>. Проверьте, чтобы в вашей таблице содержания было 3 слоя: <em>Водотоки</em>, <em>Гидрография (линии)</em> и <em>Гидрография (полигоны)</em>.</p></li>
</ol>
</div>
<div id="network-hydro-digitizing" class="section level2" number="13.3">
<h2>
<span class="header-section-number">13.3</span> Копирование и цифрование линий водотоков<a class="anchor" aria-label="anchor" href="#network-hydro-digitizing"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-hydro.html#network-hydro">В начало упражнения ⇡</a></p>
<p>Для того чтобы собрать речную сеть, можно скопировать уже существующие линейные водотоки в созданный вами слой, а затем <em>оцифровать</em> недостающие водотоки (Протва и Исьма).</p>
<blockquote>
<p><strong>Цифрование</strong> — это процесс получения векторных объектов на основе изображения. При ручной оцифровке пользователь ГИС самостоятельно рисует линии, обводит полигоны, расставляет точки поверх растрового изображения, в котором эти объекты нарисованы. Существуют также методы цифрования, которые решают эту задачу в полуавтоматическом режиме, когда система пытается самостоятельно распознать и векторизовать объекты, а пользователь затем исправляет ошибки и недочеты в результатах цифрования. Типичный пример — перевод отсканированной бумажной топографической карты в набор векторных слоев базы пространственных данных.</p>
</blockquote>
<ol style="list-style-type: decimal">
<li><p>Щелкните правой кнопкой мыши на слое <em>Водотоки</em> и выберите пункт меню <strong>Edit Features &gt; Start Editing</strong>, чтобы начать редактирование.</p></li>
<li><p>Выделите все водотоки из слоя <em>Гидрография (линии)</em>. Для этого щелкните правой кнопкой мыши по слою <em>Гидрография (линии)</em> и в контекстном меню выберите пункт <strong>Selection &gt; Select All</strong>. Скопируйте выделенные водотоки в буфер обмена через команду главного меню <strong>Edit &gt; Copy</strong>.</p></li>
<li><p>Вставьте скопированные объекты в слой <em>Водотоки</em>. Для этого воспользуйтесь стандартной командой главного меню <strong>Edit &gt; Paste</strong> и в появившемся диалоге выберите в качестве целевого слой <em>Водотоки</em>.</p></li>
<li><p>Снимите выделение с водотоков, нажав кнопку <img src="images/Ex13/image10.png"><strong>Clear Selected Features</strong> на панели инструментов <strong>Tools</strong>.</p></li>
<li><p>Удалите слой <em>Гидрография (линии)</em> из таблицы содержания. В этом задании он больше вам не понадобится.</p></li>
<li>
<p>Переключитесь в окно <strong>Create Features</strong> c помощью кнопки <img src="images/Ex13/image11.png"> на панели <strong>Tools</strong> (<strong>Рис. 4</strong>) и выберите <em>Водотоки</em> в списке цифруемых объектов:</p>
<div class="float">
<img src="images/Ex13/image12.png" alt="Рис. 4. Панель Create Features"><div class="figcaption"><em>Рис. 4. Панель Create Features</em></div>
</div>
</li>
<li><p>Приблизьтесь к верховьям <em>Протвы</em> в западной части карты. Для навигации используйте колесико мыши (масштабирование) и кнопку <kbd>C</kbd> на клавиатуре (перемещение). Рекомендуемый диапазон масштабов для цифрования — <em>1:1 500–1:2000</em>. Вы можете его отслеживать вверху окна.</p></li>
<li><p>Щелкните посередине полигона в месте начала реки и начните цифровать линию примерно по осевой линии полигона с определенным интервалом. Щелкните мышью в месте, где вы хотите поставить точку, затем переместите курсор к месту следующей точки, щелкните еще раз, и так далее. Не увлекайтесь и не расставляйте точки слишком часто. Оцифруйте осевую линию Протвы целиком с запада на восток — это займет у вас некоторое время.</p></li>
<li>
<p>Когда линия будет полностью оцифрована, щелкните дважды мышью в последней точке, или нажмите <kbd>F2</kbd>.</p>
<div class="float">
<img src="images/Ex13/image13.png" alt="Рис. 5. Оцифровка осевой линии реки и окно Create Features"><div class="figcaption"><em>Рис. 5. Оцифровка осевой линии реки и окно Create Features</em></div>
</div>
<p>Советы по цифрованию:</p>
<blockquote>
<p>Если вам <strong>мешает плавающее окно дополнительных функций</strong>, нажмите клавишу TAB.<br>
Если ваш <strong>курсор подошел к границе окна</strong>, зажмите клавишу <kbd>C</kbd> на клавиатуре и переместите карту. Отпустите клавишу C и продолжайте цифрование.<br>
Если вы <strong>поставили точку не в том месте</strong>, где хотели, нажмите <kbd>Ctrl</kbd> + <kbd>Z</kbd>, чтобы отменить действие.<br>
Если вы <strong>случайно завершили цифрование</strong> раньше, чем требуется, начните с последней точки. Ничего страшного, если у вас получится <em>2-3</em>, а не одна линия — их всегда можно объединить.<br>
Если вы <strong>хотите сдвинуть вершину</strong>, выберите стрелку на панели редактирования и дважды щелкните на линии — появятся вершины. После того, как сдвинете нужные точки, щелкните курсором на пустом месте карты.<br>
Если <strong>курсор в узком месте назойливо притягивается к границе реки</strong>, попробуйте увеличить масштаб изображения.</p>
</blockquote>
</li>
<li><p>Повторите операцию цифрования для реки <em>Исьмы</em> от ее верховья до устья. Последнюю точку поставьте на осевой линии <em>Протвы</em>.</p></li>
<li><p>Сохраните изменения, выбрав на панели <strong>Editor</strong> команду <strong>Editor &gt; Save Edits</strong>.</p></li>
<li><p>Снимите выделение с водотоков, нажав кнопку <img src="images/Ex13/image10.png"><strong>Clear Selected Features</strong> на панели инструментов <strong>Tools</strong>.</p></li>
<li><p>Нажмите глобус <img src="images/Ex13/image14.png"><strong>Full extent</strong>, чтобы все объекты поместились на экране.</p></li>
</ol>
</div>
<div id="притягивание-снэппинг-притоков-и-разрезание-осевой-линии-основных-рек" class="section level2" number="13.4">
<h2>
<span class="header-section-number">13.4</span> Притягивание (снэппинг) притоков и разрезание осевой линии основных рек<a class="anchor" aria-label="anchor" href="#%D0%BF%D1%80%D0%B8%D1%82%D1%8F%D0%B3%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%81%D0%BD%D1%8D%D0%BF%D0%BF%D0%B8%D0%BD%D0%B3-%D0%BF%D1%80%D0%B8%D1%82%D0%BE%D0%BA%D0%BE%D0%B2-%D0%B8-%D1%80%D0%B0%D0%B7%D1%80%D0%B5%D0%B7%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BE%D1%81%D0%B5%D0%B2%D0%BE%D0%B9-%D0%BB%D0%B8%D0%BD%D0%B8%D0%B8-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D1%85-%D1%80%D0%B5%D0%BA"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-hydro.html#network-hydro">В начало упражнения ⇡</a></p>
<p>Вы помните, что ранее оцифрованные притоки <em>Протвы</em> и <em>Исьмы</em> были пристыкованы к полигональной границе реки. Возникает вопрос: сохранился ли этот характер соседства после того, как вы заменили полигональное представление рек на линейное?</p>
<ol style="list-style-type: decimal">
<li>
<p>Найдите устье реки <em>Межиловки</em> при впадении в <em>Протву</em> (западная часть полигона) и увеличьтесь так, чтобы было хорошо видно место впадения.</p>
<blockquote>
<p>Какая топологическая ошибка может быть замечена в месте впадения ручья в Протву?</p>
</blockquote>
</li>
<li>
<p>Возьмите стрелку <img src="images/Ex13/image15.png"> на панели <strong>Editor</strong> и дважды щелкните на линии ручья. Должны появиться вершины. Потяните за последнюю вершину и пристыкуйте ее к линии реки (<strong>Рис. 6</strong>). Щелкните на пустом месте, чтобы завершить редактирование.</p>
<p><img src="images/Ex13/image16.png" alt="Рис. 6. Притягивание устья притока к осевой линии реки"><img src="images/Ex13/image17.png"></p>
</li>
<li>
<p>Повторите операцию для всех остальных ручьев. Перемещайтесь по карте, используя клавишу <kbd>C</kbd>. Не забудьте также про <em>Исьму</em>. Сохраните изменения, выбрав команду <strong>Editor &gt; Save Edits</strong></p>
<p>Помимо сохранения связности для геометрической сети очень важно, чтобы линии были разрезаны на сегменты между пересечениями. Это необходимо для того чтобы отличать реальные узлы от перекрытий (сравните обычный перекресток и эстакаду!).</p>
</li>
<li><p>Выделите на карте <em>Протву</em> и приблизьтесь к месту впадения в нее реки <em>Межиловки</em>.</p></li>
<li><p>Найдите на панели <strong>Editor</strong> инструмент разрезания линии <img src="images/Ex13/image18.png"> и щелкните мышью в месте впадения ручья в <em>Протву</em>. Линия <em>Протвы</em> разобьется этой точкой на 2 части.</p></li>
<li><p>Повторите процедуру с выделением <em>Протвы</em> и разрезанием для всех остальных притоков.</p></li>
<li><p>Разрежьте аналогичным образом остальные водотоки.</p></li>
<li><p>Сохраните изменения, выбрав команду <strong>Editor &gt; Save Edits</strong>. Завершите редактирование, выбрав команду <strong>Editor &gt; Stop Editing</strong>.</p></li>
<li><p>Сохраните документ карты.</p></li>
</ol>
</div>
<div id="network-hydro-sink" class="section level2" number="13.5">
<h2>
<span class="header-section-number">13.5</span> Установка точки стока<a class="anchor" aria-label="anchor" href="#network-hydro-sink"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-hydro.html#network-hydro">В начало упражнения ⇡</a></p>
<p>Подготовленных вами данных уже достаточно для того, чтобы построить геометрическую сеть. Однако в общем случае сеть является двунаправленной (например, транспортная), а наша сеть имеет вполне определенное направление — вниз по течению. Чтобы задать это направление, необходимо создать новый точечный слой и поставить в нем одну точку, расположенную ниже всего по течению.</p>
<ol style="list-style-type: decimal">
<li><p>Перейдите в окно Каталога, щелкните правой кнопкой мыши по набору данных <em>Hydro</em> и выберите пункт <strong>New &gt; Feature Class</strong>.</p></li>
<li><p>Задайте классу имя <em>Sink</em> и точечный тип <em>Point Features</em>. Остальные параметры оставьте по умолчанию.</p></li>
<li><p>Смените символ слоя <em>Sink</em> на кружок голубого цвета диаметром <em>10</em> пикселов.</p></li>
<li><p>Включите режим редактирования с помощью команды <strong>Edit Features &gt; Start Editing</strong>, в окне <strong>Create Features</strong> выберите <em>Sink</em> и поставьте точку на восточной оконечности реки Протвы (правый край карты).</p></li>
<li><p>Сохраните изменения и завершите режим редактирования.</p></li>
<li><p>Добавьте на карту слой горизонталей <em>ContoursBasic</em> из базы данных <img src="images/Ex13/image5.png"><em>Satino.gdb</em> и смените цвет линий на бледно-серый. Переместите его вниз в качестве основы.</p></li>
<li><p>Отключите слой <em>Гидрография (полигоны)</em> и нажмите кнопку <img src="images/Ex13/image14.png"><strong>Full extent</strong>, чтобы вся территория полигона поместилась на экране.</p></li>
</ol>
<div class="float">
<img src="images/Ex13/image19.png" alt="Рис. 7. Линейный слой водотоков, горизонтали и точка стока"><div class="figcaption"><em>Рис. 7. Линейный слой водотоков, горизонтали и точка стока</em></div>
</div>
<p><kbd><strong>Снимок экрана №1.</strong> Линейный слой водотоков, горизонтали и точка стока</kbd></p>
</div>
<div id="network-hydro-gnetwork" class="section level2" number="13.6">
<h2>
<span class="header-section-number">13.6</span> Построение и настройка геометрической сети<a class="anchor" aria-label="anchor" href="#network-hydro-gnetwork"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-hydro.html#network-hydro">В начало упражнения ⇡</a></p>
<p>Ваши данные полностью готовы к тому, чтобы построить на их основе геометрическую сеть.</p>
<ol style="list-style-type: decimal">
<li><p>Перейдите в окно <strong>Каталога</strong>, щелкните правой кнопкой мыши по набору данных <em>Hydro</em> и выберите пункт <strong>New &gt; Geometric Network</strong>.</p></li>
<li>
<p>Оставьте <em>Hydro_Net</em> в качестве имени по умолчанию и установите расстояние принудительного снэппинга линий равным 1 м (<strong>Рис. 8</strong>). Эта опция будет полезна, если вы где-то не дотянули устье притока до реки. Оно дотянется автоматически. Нажмите <strong>Далее</strong>.</p>
<div class="float">
<img src="images/Ex13/image20.png" alt="Рис. 8. Имя геометрической сети и параметры снэппинга"><div class="figcaption"><em>Рис. 8. Имя геометрической сети и параметры снэппинга</em></div>
</div>
</li>
<li>
<p>В следующем окне нажмите <strong>Select All</strong>, чтобы выбрать слои, участвующие в построении сети (<strong>Рис. 9</strong>). Нажмите <strong>Далее</strong>.</p>
<div class="float">
<img src="images/Ex13/image21.png" alt="Рис. 9. Выбор слоев, участвующих в построении сети"><div class="figcaption"><em>Рис. 9. Выбор слоев, участвующих в построении сети</em></div>
</div>
</li>
<li>
<p>Перед вами окажется диалог настройки ролей. <em>Junction</em> — это узел, <em>Edge</em> — это ребро. Для слоя Sink установите значение параметра <strong>Sources &amp; Sinks</strong> равным <em>Yes</em>. Система будет знать, что этот слой содержит точки, являющиеся истоками либо стоками (<strong>Рис. 10</strong>). Нажмите <strong>Далее</strong>.</p>
<div class="float">
<img src="images/Ex13/image22.png" alt="Рис. 10. Установка ролей слоев в геометрической сети"><div class="figcaption"><em>Рис. 10. Установка ролей слоев в геометрической сети</em></div>
</div>
</li>
<li><p>Во всех остальных диалогах оставьте параметры по умолчанию. Нажмите <strong>Finish</strong> в последнем диалоге, чтобы завершить создание сети.</p></li>
<li><p>После того как будет построена геометрическая сеть, в таблицу содержания добавятся 3 новых слоя: <em>Водотоки (ребра сети)</em>, <em>Hydro_Net_Junctions</em> (сочленения в сети) и <em>Sink</em> (точка стока). Удалите новые слои <em>Водотоки</em> и <em>Sink</em>, поскольку они дублируют старые</p></li>
<li><p>Включите режим редактирования и откройте таблицу атрибутов слоя <em>Sink</em>.</p></li>
<li>
<p>Установите для единственной точки в этом слое поле <em>AncillaryRole</em> равным 2 (<em>Sink)</em>. Если список не отображается, просто введите в ячейку 2. Обратите внимание на то, что есть и противоположный вариант — <em>Source</em> (исток).</p>
<div class="float">
<img src="images/Ex13/image23.png" alt="Рис. 11. Установка роли точки стока"><div class="figcaption"><em>Рис. 11. Установка роли точки стока</em></div>
</div>
</li>
<li><p>Сохраните изменения, выбрав пункт меню <strong>Editor &gt; Save Edits</strong>.</p></li>
<li>
<p>Щелкните правой кнопкой мыши на пустом поле вверху окна и откройте панель инструментов <strong>Utility Network Analyst</strong>, предназначенную для работы с геометрической сетью (<strong>Рис. 12</strong>).</p>
<div class="float">
<img src="images/Ex13/image24.png" alt="Рис. 12. Панель инструментов Utility Network Analyst для работы с геометрическими сетями"><div class="figcaption"><em>Рис. 12. Панель инструментов Utility Network Analyst для работы с геометрическими сетями</em></div>
</div>
</li>
<li>
<p>Выберите в меню пункт <strong>Flow &gt; Display Arrows</strong> для того чтобы система автоматически показала направление течения. Вдоль отрезков будут показаны кружки, означающие, что направление еще не задано (<strong>Рис. 13</strong>).</p>
<div class="float">
<img src="images/Ex13/image25.png" alt="Рис. 13. Неопределенное направление течения в геометрической сети"><div class="figcaption"><em>Рис. 13. Неопределенное направление течения в геометрической сети</em></div>
</div>
</li>
<li>
<p>Нажмите кнопку <img src="images/Ex13/image26.png"><strong>Set Flow Direction</strong>. Кружки должны смениться стрелочками, указывающими направление течения. Просмотрите разные части карты и убедитесь в том, что направление течения задано одинаково верно для всех водотоков (<strong>Рис. 14</strong>).</p>
<div class="float">
<img src="images/Ex13/image27.png" alt="Рис. 14. Определенное направление течения в геометрической сети"><div class="figcaption"><em>Рис. 14. Определенное направление течения в геометрической сети</em></div>
</div>
<p><kbd><strong>Снимок экрана №2.</strong> Геометрическая сеть с определенным направлением течения</kbd></p>
</li>
<li><p>Завершите сеанс редактирования, выбрав на панели <strong>Editor</strong> пункт меню <strong>Editing &gt; Stop Editing</strong>. В появившемся диалоге нажмите Да.</p></li>
</ol>
<p>Вы закончили подготовку и настройку геометрической сети. Теперь она доступна для анализа и редактирования.</p>
</div>
<div id="network-hydro-analysis" class="section level2" number="13.7">
<h2>
<span class="header-section-number">13.7</span> Анализ и редактирование геометрической сети<a class="anchor" aria-label="anchor" href="#network-hydro-analysis"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-hydro.html#network-hydro">В начало упражнения ⇡</a></p>
<p>Самое интересное в сетевых моделях — это возможность их анализа. Например, если зафиксирована точка прорыва на трубопроводе, можно определить все расположенные далее сегменты и ответвления сети, которые пострадают в результате аварии. Для замыкающего створа на реке можно определить все притоки, расположенные выше по течению или быстро трассировать путь воды вниз по течению вплоть до устья основной реки бассейна. При анализе транспортных сетей часто решается задача прокладки кратчайшего маршрута, расчета зон доступности и управления парком транспортных средств.</p>
<blockquote>
<p>При анализе геометрических сетей в <strong>ArcGIS</strong> используются флаги и барьеры. <strong>Флаг</strong> — это точка, относительно которой осуществляется трассировка сети. <strong>Барьер</strong> — это точка, запрещающая проход по ребру графа или его вершине.</p>
</blockquote>
<ol style="list-style-type: decimal">
<li>
<p>Откройте меню флагов и барьеров на панели инструментов <strong>Utility Network Analyst</strong> и выберите флаг для вершины (первая иконка на <strong>Рис. 15</strong>).</p>
<div class="float">
<img src="images/Ex13/image28.png" alt="Рис. 15. Меню флагов и барьеров"><div class="figcaption"><em>Рис. 15. Меню флагов и барьеров</em></div>
</div>
</li>
<li><p>Поставьте флажок в месте впадения реки <em>Межиловки</em> в <em>Протву</em>.</p></li>
<li>
<p>В списке <strong>Trace Task</strong> выберите задачу <strong>Trace Upstream</strong> (трассировать вверх по течению) и нажмите кнопку <img src="images/Ex13/image29.png"><strong>Solve</strong>.</p>
<p>Инструмент анализа выделит водотоки, расположенные выше по течению относительно заданной точки. Весь их сток в конечном счете попадает в данную точку (<strong>Рис. 16</strong>).</p>
<div class="float">
<img src="images/Ex13/image30.png" alt="Рис. 16. Трассировка водотоков, расположенных выше по течению"><div class="figcaption"><em>Рис. 16. Трассировка водотоков, расположенных выше по течению</em></div>
</div>
<p><kbd><strong>Снимок экрана №3.</strong> Водотоки выше по течению относительно заданной точки</kbd></p>
</li>
<li>
<p>Смените задачу на <strong>Trace Downstream</strong> и опять нажмите кнопку <img src="images/Ex13/image29.png"><strong>Solve</strong>.</p>
<p>Инструмент анализа построит маршрут вниз по течению</p>
</li>
<li>
<p>Поставьте еще один флажок в верховьях ручья Язвицы и запустите анализ в режиме <strong>Find Path</strong>. Будет построен маршрут между двумя точками (<strong>Рис. 17</strong>).</p>
<div class="float">
<img src="images/Ex13/image31.png" alt="Рис. 17. Маршрут между двумя точками"><div class="figcaption"><em>Рис. 17. Маршрут между двумя точками</em></div>
</div>
<p><kbd><strong>Снимок экрана №4.</strong> Маршрут между двумя точками</kbd></p>
</li>
<li>
<p>Поставьте точечный барьер (вторая справа иконка на <strong>Рис. 15</strong>) в месте впадения <em>Исьмы</em> в <em>Протву</em> и попробуйте еще раз рассчитать маршрут.</p>
<blockquote>
<p>Что произошло с расчетом маршрута после того, как вы поставили барьер?</p>
</blockquote>
</li>
<li><p>Очистите флаги и барьеры, выбрав <strong>Analysis &gt; Clear Flags</strong> и <strong>Analysis &gt; Clear Barriers</strong>.</p></li>
<li>
<p>Попробуйте поэкспериментировать с разными режимами расчетов в меню <strong>Trace Task</strong> и расстановкой флагов и барьеров.</p>
<p>Геометрическая сеть отличается также тем, что это топологический формат хранения данных — она хранит связность ребер и вершин, что бывает удобно при редактировании и совершенно необходимо при анализе.</p>
</li>
<li><p>Включите режим редактирования снова и приблизьтесь к месту впадения любого ручья в <em>Протву</em>.</p></li>
<li>
<p>Выделите узел сочленения и переместите его в сторону.</p>
<blockquote>
<p>Что происходит при перемещении узла сети? Остаются ли ребра на своих местах?**</p>
</blockquote>
</li>
</ol>
<p>Сохраните документ карты еще раз.</p>
</div>
<div id="network-hydro-questions" class="section level2" number="13.8">
<h2>
<span class="header-section-number">13.8</span> Контрольные вопросы<a class="anchor" aria-label="anchor" href="#network-hydro-questions"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-hydro.html#network-hydro">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Каким требованиям должны отвечать гидрографические данные, чтобы их можно было представить в виде геометрической сети?</p></li>
<li><p>Какие функции выполняют флаги и барьеры при решении задач сетевого анализа?</p></li>
<li><p>Какие задачи можно решать с помощью анализа геометрических сетей?</p></li>
<li><p>Какие преимущества при редактировании данных дает топологическая структура данных?</p></li>
</ol>
</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="network-analysis.html"><span class="header-section-number">12</span> Транспортные сети</a></div>
<div class="next"><a href="weighted-overlay.html"><span class="header-section-number">14</span> Оптимизация местоположения</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#network-hydro"><span class="header-section-number">13</span> Гидрографические сети</a></li>
<li>
<a class="nav-link" href="#network-hydro-intro"><span class="header-section-number">13.1</span> Введение</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#network-hydro-control"><span class="header-section-number">13.1.1</span> Контрольный лист</a></li>
<li><a class="nav-link" href="#network-hydro-annotation"><span class="header-section-number">13.1.2</span> Аннотация</a></li>
</ul>
</li>
<li><a class="nav-link" href="#network-hydro-dataset"><span class="header-section-number">13.2</span> Создание набора данных речной сети</a></li>
<li><a class="nav-link" href="#network-hydro-digitizing"><span class="header-section-number">13.3</span> Копирование и цифрование линий водотоков</a></li>
<li><a class="nav-link" href="#%D0%BF%D1%80%D0%B8%D1%82%D1%8F%D0%B3%D0%B8%D0%B2%D0%B0%D0%BD%D0%B8%D0%B5-%D1%81%D0%BD%D1%8D%D0%BF%D0%BF%D0%B8%D0%BD%D0%B3-%D0%BF%D1%80%D0%B8%D1%82%D0%BE%D0%BA%D0%BE%D0%B2-%D0%B8-%D1%80%D0%B0%D0%B7%D1%80%D0%B5%D0%B7%D0%B0%D0%BD%D0%B8%D0%B5-%D0%BE%D1%81%D0%B5%D0%B2%D0%BE%D0%B9-%D0%BB%D0%B8%D0%BD%D0%B8%D0%B8-%D0%BE%D1%81%D0%BD%D0%BE%D0%B2%D0%BD%D1%8B%D1%85-%D1%80%D0%B5%D0%BA"><span class="header-section-number">13.4</span> Притягивание (снэппинг) притоков и разрезание осевой линии основных рек</a></li>
<li><a class="nav-link" href="#network-hydro-sink"><span class="header-section-number">13.5</span> Установка точки стока</a></li>
<li><a class="nav-link" href="#network-hydro-gnetwork"><span class="header-section-number">13.6</span> Построение и настройка геометрической сети</a></li>
<li><a class="nav-link" href="#network-hydro-analysis"><span class="header-section-number">13.7</span> Анализ и редактирование геометрической сети</a></li>
<li><a class="nav-link" href="#network-hydro-questions"><span class="header-section-number">13.8</span> Контрольные вопросы</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Основы геоинформатики: практикум в ArcGIS</strong>" was written by Тимофей Самсонов. It was last built on 2025-03-17.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
