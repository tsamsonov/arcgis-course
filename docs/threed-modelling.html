<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Упражнение 18 Трехмерное моделирование | Основы геоинформатики: практикум в ArcGIS</title>
<meta name="author" content="Тимофей Самсонов">
<meta name="description" content="Скачать данные и файл отчета  18.1 Введение Цель задания — знакомство с трехмерными моделями данных, трехмерной визуализацией и анализом в ГИС Параметр Значение Теоретическая подготовка Трехмерные...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Упражнение 18 Трехмерное моделирование | Основы геоинформатики: практикум в ArcGIS">
<meta property="og:type" content="book">
<meta property="og:description" content="Скачать данные и файл отчета  18.1 Введение Цель задания — знакомство с трехмерными моделями данных, трехмерной визуализацией и анализом в ГИС Параметр Значение Теоретическая подготовка Трехмерные...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Упражнение 18 Трехмерное моделирование | Основы геоинформатики: практикум в ArcGIS">
<meta name="twitter:description" content="Скачать данные и файл отчета  18.1 Введение Цель задания — знакомство с трехмерными моделями данных, трехмерной визуализацией и анализом в ГИС Параметр Значение Теоретическая подготовка Трехмерные...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="default">
<link rel="stylesheet" href="custom.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Основы геоинформатики: практикум в ArcGIS</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Введение</a></li>
<li class="book-part">Визуализация данных</li>
<li><a class="" href="map-design-quaternary.html"><span class="header-section-number">1</span> Карта четвертичных отложений</a></li>
<li><a class="" href="map-design-general.html"><span class="header-section-number">2</span> Общегеографическая карта</a></li>
<li><a class="" href="map-design-climates.html"><span class="header-section-number">3</span> Климатическая карта</a></li>
<li><a class="" href="map-design-economic.html"><span class="header-section-number">4</span> Социально-экономическая карта</a></li>
<li class="book-part">Базовые технологии ГИС</li>
<li><a class="" href="map-ref-general.html"><span class="header-section-number">5</span> Привязка и векторизация (туристская карта)</a></li>
<li><a class="" href="map-ref-hydrogeologic.html"><span class="header-section-number">6</span> Привязка и векторизация (гидрогеологическая карта)</a></li>
<li><a class="" href="map-ref-economic.html"><span class="header-section-number">7</span> Привязка и векторизация (административная карта)</a></li>
<li><a class="" href="stat-map-economic.html"><span class="header-section-number">8</span> Соединение табличных данных</a></li>
<li><a class="" href="geocoding.html"><span class="header-section-number">9</span> Адресное геокодирование</a></li>
<li class="book-part">Векторный анализ</li>
<li><a class="" href="overlay.html"><span class="header-section-number">10</span> Пространственные взаимосвязи</a></li>
<li><a class="" href="land-cover-hydro.html"><span class="header-section-number">11</span> Пространственные соотношения</a></li>
<li><a class="" href="network-analysis.html"><span class="header-section-number">12</span> Транспортные сети</a></li>
<li><a class="" href="network-hydro.html"><span class="header-section-number">13</span> Гидрографические сети</a></li>
<li class="book-part">Растровый анализ</li>
<li><a class="" href="weighted-overlay.html"><span class="header-section-number">14</span> Оптимизация местоположения</a></li>
<li><a class="" href="dem.html"><span class="header-section-number">15</span> Цифровое моделирование рельефа</a></li>
<li class="book-part">Пространственное моделирование</li>
<li><a class="" href="density-analysis.html"><span class="header-section-number">16</span> Оценка плотности распределения</a></li>
<li><a class="" href="interpolation.html"><span class="header-section-number">17</span> Пространственная интерполяция</a></li>
<li><a class="active" href="threed-modelling.html"><span class="header-section-number">18</span> Трехмерное моделирование</a></li>
<li class="book-part">Описание функций</li>
<li><a class="" href="manual-catalog.html"><span class="header-section-number">A</span> Работа с окном каталога</a></li>
<li><a class="" href="manual-toolbox.html"><span class="header-section-number">B</span> Геообработка</a></li>
<li><a class="" href="manual-gdb.html"><span class="header-section-number">C</span> База геоданных</a></li>
<li><a class="" href="manual-toc.html"><span class="header-section-number">D</span> Работа с таблицей слоев</a></li>
<li><a class="" href="manual-toolbar.html"><span class="header-section-number">E</span> Панели инструментов</a></li>
<li><a class="" href="manual-navigation.html"><span class="header-section-number">F</span> Навигация по карте</a></li>
<li><a class="" href="manual-vector.html"><span class="header-section-number">G</span> Оформление векторного слоя</a></li>
<li><a class="" href="manual-raster.html"><span class="header-section-number">H</span> Оформление растрового слоя</a></li>
<li><a class="" href="manual-labels.html"><span class="header-section-number">I</span> Подписи объектов</a></li>
<li><a class="" href="manual-attributes.html"><span class="header-section-number">J</span> Атрибутивная таблица</a></li>
<li><a class="" href="manual-select.html"><span class="header-section-number">K</span> Выборка объектов</a></li>
<li><a class="" href="manual-projections.html"><span class="header-section-number">L</span> Проекции и координатная сетка</a></li>
<li><a class="" href="manual-georef.html"><span class="header-section-number">M</span> Привязка растровых данных</a></li>
<li><a class="" href="manual-edit.html"><span class="header-section-number">N</span> Редактирование</a></li>
<li><a class="" href="manual-layout.html"><span class="header-section-number">O</span> Компоновка карт</a></li>
<li><a class="" href="manual-legend.html"><span class="header-section-number">P</span> Легенда карты</a></li>
<li><a class="" href="manual-export.html"><span class="header-section-number">Q</span> Экспорт изображения</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="threed-modelling" class="section level1" number="18">
<h1>
<span class="header-section-number">Упражнение 18</span> Трехмерное моделирование<a class="anchor" aria-label="anchor" href="#threed-modelling"><i class="fas fa-link"></i></a>
</h1>
<p><a href="http://autolab.geogr.msu.ru/gis/data/Ex18.zip">Скачать данные и файл отчета</a></p>
<div id="threed-modelling-intro" class="section level2" number="18.1">
<h2>
<span class="header-section-number">18.1</span> Введение<a class="anchor" aria-label="anchor" href="#threed-modelling-intro"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Цель задания</strong> — знакомство с трехмерными моделями данных, трехмерной визуализацией и анализом в ГИС</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Теоретическая подготовка</em></td>
<td>Трехмерные модели данных, виртуальное моделирование, анализ цифровых моделей рельефа, построение зон видимости.</td>
</tr>
<tr class="even">
<td align="left"><em>Практическая подготовка</em></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Настройка символики и подписей объектов. Создание базы геоданных и классов пространственных объектов. Инструменты геообработки ArcToolbox. Создание компоновки карты: название легенда, масштаб, градусная сетка.</td>
</tr>
<tr class="odd">
<td align="left"><em>Исходные данные</em></td>
<td>База данных ГИС “Сатино”, аэрофотоснимок сверхвысокого разрешения.</td>
</tr>
<tr class="even">
<td align="left"><em>Результат</em></td>
<td>Трехмерная модель Сатинского учебного полигона, зоны видимости и линии небосвода для двух обзорных точек</td>
</tr>
<tr class="odd">
<td align="left"><em>Ключевые слова</em></td>
<td>Трехмерный анализ и моделирование, цифровые модели рельефа (ЦМР), драпировка снимка</td>
</tr>
</tbody>
</table></div>
<div id="threed-modelling-control" class="section level3" number="18.1.1">
<h3>
<span class="header-section-number">18.1.1</span> Контрольный лист<a class="anchor" aria-label="anchor" href="#threed-modelling-control"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Добавить на карту ЦМР и отобразить ее методом горизонталей с послойной окраской.</li>
<li>Подготовить вспомогательные объекты для учета препятствий.</li>
<li>Преобразовать растровые данные в триангуляционные.</li>
<li>Визуализировать данные в трехмерной среде (приложение ArcScene).</li>
<li>Выполнить анализ зоны видимости наблюдательного пункта при разных положениях его высоты.</li>
</ul>
</div>
<div id="threed-modelling-annotation" class="section level3" number="18.1.2">
<h3>
<span class="header-section-number">18.1.2</span> Аннотация<a class="anchor" aria-label="anchor" href="#threed-modelling-annotation"><i class="fas fa-link"></i></a>
</h3>
<p>Трехмерные модели играют важную роль в географических исследованиях. Изучение рельефа и его морфометрических характеристик; моделирование полей распределения физических и химических показателей в океане, атмосфере и почвах; моделирование городской среды и транспортных коммуникаций; моделирование поверхностей небесных тел; имитация чрезвычайных ситуаций и военных действий — это лишь краткий список тех задач, которые решаются с помощью анализа и визуализации 3D-моделей.</p>
<p>Задание посвящено знакомству с трехмерным ГИС-моделированием. Географическая задача, которую вам предстоит решить — это определение зоны видимости в точке с учетом рельефа и физических препятствий, таких как дома и лесные массивы. Анализ зон видимости позволяет определить охват территории доступный для визуального наблюдения.</p>
<p>Зона видимости ограничивается трехмерной линией небосвода (skyline). Чем круче угол направления между точкой наблюдателя и линией небосвода, тем меньше будет открытость небосвода по данному направлению. Общая открытость небосвода характеризует долю видимой части небесной полусферы. Это важный топоклиматический параметр, накладывающий ограничение на объем поступающей прямой солнечной радиации. Как следствие, открытость небосвода учитывается при расчетах таяния снега, моделировании городского климата, оценке пригодности земель для сельского хозяйства.</p>
<p>В процессе занятия вы научитесь работать с растровыми и триангуляционными моделями рельефа, управлять отображением слоев в виртуальной 3D-среде и использовать снимки в качестве текстуры трехмерных моделей, определять зону видимости и визуализировать ее.</p>
</div>
</div>
<div id="threed-modelling-workspace" class="section level2" number="18.2">
<h2>
<span class="header-section-number">18.2</span> Организация рабочего пространства<a class="anchor" aria-label="anchor" href="#threed-modelling-workspace"><i class="fas fa-link"></i></a>
</h2>
<p><a href="threed-modelling.html#threed-modelling">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Скопируйте данные упражнения в свой рабочий каталог <em>Ex18</em> с помощью <strong>Проводника</strong>.</p></li>
<li><p>Откройте <strong>ArcMap</strong> и в нем — окно <strong>Catalog (Каталог)</strong>.</p></li>
<li><p>Сохраните документ карты в свой каталог <em>Ex18</em> под именем <em>Ex18_ЦМР.mxd</em>.</p></li>
<li><p>Создайте в домашнем каталоге новую базу геоданных <em>Ex18</em>.</p></li>
<li><p>Щелкните по <em>Ex18.gdb</em> правой кнопкой мыши и выберите пункт <strong>Make Default Geodatabase</strong> чтобы назначить ее базой геоданных по умолчанию.</p></li>
</ol>
</div>
<div id="threed-modelling-demviz" class="section level2" number="18.3">
<h2>
<span class="header-section-number">18.3</span> Визуализация цифровой модели рельефа<a class="anchor" aria-label="anchor" href="#threed-modelling-demviz"><i class="fas fa-link"></i></a>
</h2>
<p><a href="threed-modelling.html#threed-modelling">В начало упражнения ⇡</a></p>
<p>Для того чтобы полноценно моделировать видимость в трехмерном пространстве, необходимо иметь в наличии цифровую модель рельефа, а также и объекты, расположенные на поверхности.</p>
<ol style="list-style-type: decimal">
<li>
<p>Раскройте в домашнем каталоге базу геоданных <em>Satino.gdb</em> и перенесите на карту следующие слои из группы <em>General</em>:</p>
<ul>
<li>
<em>WaterPolygon</em> (площадная гидрография);</li>
<li>
<em>WaterLine</em> (линейная гидрография);</li>
<li>
<em>Contours</em> (горизонтали);</li>
<li>
<em>DEM</em> (цифровая модель рельефа);</li>
</ul>
</li>
<li><p>Разместите слои именно в том порядке, в котором они указаны выше.</p></li>
<li>
<p>Дважды щелкните на слое <em>Горизонтали</em>. Перейдите на вкладку <strong>Display</strong> и установите значение прозрачности равным <em>80%</em> (Рис. 1).</p>
<div class="figure">
<img src="images/Ex18/image2.png" alt=""><p class="caption"><em>Рис. 1. Установка прозрачности слоя</em></p>
</div>
</li>
<li><p>Перейдите на вкладку <strong>Symbology</strong> и поменяйте цвет горизонталей на черный. Нажмите <strong>ОК</strong>.</p></li>
<li><p>Смените символ слоя <em>Гидрография (линии)</em> на ярко-голубую линию толщиной <em>1.5</em> пиксела.</p></li>
<li><p>Смените цвет объектов слоя <em>Гидрография (полигоны)</em> на ярко-голубой.</p></li>
<li><p>Переименуйте слой <em>DEM</em> в таблице содержания в <em>ЦМР</em>.</p></li>
<li><p>Дважды щелкните на слое <em>ЦМР</em>, перейдите на вкладку <strong>Symbology</strong> и нажмите <strong>Classify…</strong>, чтобы сменить метод классификации.</p></li>
<li>
<p>В появившемся диалоге выберите режим <em>Defined Interval</em> (заданный вручную интервал) и установите величину интервала равной 4 метрам. Окно классификации примет вид, аналогичный Рис. 2.</p>
<div class="figure">
<img src="images/Ex18/image3.png" alt=""><p class="caption"><em>Рис. 2. Классификация высот для послойной окраски методом заданного интервала</em></p>
</div>
</li>
<li><p>Нажмите <strong>ОК</strong> чтобы закрыть диалог классификации высот.</p></li>
<li>
<p>Выберите цветовую шкалу, близкую по гамме к гипсометрической. Окно карты примет вид, аналогичный представленному на Рис. 3.</p>
<div class="figure">
<img src="images/Ex18/image4.png" alt=""><p class="caption"><em>Рис. 3. Цифровая модель рельефа долины реки Протвы</em></p>
</div>
<p><kbd><strong>Снимок экрана №1.</strong> Цифровая модель рельефа долины реки Протвы</kbd></p>
</li>
</ol>
</div>
<div id="threed-modelling-additional" class="section level2" number="18.4">
<h2>
<span class="header-section-number">18.4</span> Подготовка вспомогательных цифровых моделей для учета препятствий<a class="anchor" aria-label="anchor" href="#threed-modelling-additional"><i class="fas fa-link"></i></a>
</h2>
<p><a href="threed-modelling.html#threed-modelling">В начало упражнения ⇡</a></p>
<p>При расчете зоны видимости важно учитывать, что на поверхности расположены разные объекты, в том числе здания и растительность. Чтобы учесть объект в качестве препятствия, есть два пути: представить его в виде трехмерного тела, либо внедрить в качестве неровности в цифровую модель рельефа. Для растительности вам предлагается воспользоваться вторым вариантом. Алгоритм состоит из двух шагов:</p>
<ul>
<li><p>­преобразовать слой растительности в растр, каждый пиксел которого хранит значение высоты растительности;</p></li>
<li><p>прибавить полученный растр к растру ЦМР; там, где леса нет, высота ЦМР сохранится; на залесенных участках к ней прибавится высота растительного покрова.</p></li>
</ul>
<ol style="list-style-type: decimal">
<li><p>Найдите слой <em>VegTypes</em> в базе данных <em>Satino.gdb</em> и добавьте его на карту.</p></li>
<li><p>Дважды щелкните на слое <em>Растительность</em> и перейдите на вкладку <strong>Symbology</strong>.</p></li>
<li>
<p>Выберите тип отображение <strong>Quantities &gt; Graduated Colors</strong>. В качестве поля отображения укажите поле <em>Высота</em>. Выберите шкалу от светло-зеленого к темно-зеленому. Диалог примет вид, аналогичный представленному на Рис. 4:</p>
<div class="figure">
<img src="images/Ex18/image5.png" alt=""><p class="caption"><em>Рис. 4. Визуализация слоя по численному показателю методом количественного фона</em></p>
</div>
</li>
<li>
<p>Нажмите <strong>ОК</strong>. Окно карты примет следующий вид (Рис. 5):</p>
<div class="figure">
<img src="images/Ex18/image6.png" alt=""><p class="caption"><em>Рис. 5. Количественный фон по высоте растительности</em></p>
</div>
</li>
<li><p>Откройте <strong>ArcToolbox</strong> и запустите инструмент <strong>Conversion Tools &gt; To Raster &gt; Polygon to Raster</strong>.</p></li>
<li><p>Выберите в качестве входных данных <strong>Input Features</strong> слой <em>Растительность</em>.</p></li>
<li><p>В списке <strong>Field</strong> выберите поле <em>Height</em> — значение, хранящееся в нем, будет присвоено каждой ячейке растра.</p></li>
<li>
<p>Установите параметр <strong>Cell size</strong> равным <em>2,5</em> метра. Остальные параметры оставьте по умолчанию. Диалог инструмента примет вид, аналогичный представленному на Рис. 6:</p>
<div class="figure">
<img src="images/Ex18/image7.png" alt=""><p class="caption"><em>Рис. 6. Преобразование полигона лесного массива в растровое представление с помощью инструмента Polygon to Raster</em></p>
</div>
</li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить выполнение инструмента.</p></li>
<li><p>Полученный слой переименуйте в <em>Высота растительности</em>.</p></li>
<li><p>Запустите инструмент <strong>Spatial Analyst Tools &gt; Math &gt; Plus</strong>, осуществляющий сложение растров.</p></li>
<li><p>Выберите в качестве первого растра <em>ЦМР</em>, в качестве второго — <em>Высота растительности</em>.</p></li>
<li>
<p>Назовите выходной класс <em>DEM_Veg</em>. Диалог примет следующий вид (Рис. 7).</p>
<div class="figure">
<img src="images/Ex18/image8.png" alt=""><p class="caption"><em>Рис. 7. Инструмент <strong>Plus</strong>, осуществляющий сложение растров</em></p>
</div>
</li>
<li><p>Нажмите <em>ОК</em>.</p></li>
<li><p>После того, как полученный слой добавится на карту, назовите его <em>ЦМР+</em>.</p></li>
<li>
<p>Перенесите слой <em>ЦМР+</em> под гидрографию. Обратите внимание на резкие перепады яркости изображения, обусловленные внедрением объектов растительности.</p>
<div class="figure">
<img src="images/Ex18/image9.png" alt=""><p class="caption"><em>Рис. 8. Поле высот с внедренными объектами растительности</em></p>
</div>
</li>
</ol>
</div>
<div id="threed-modelling-rastertotin" class="section level2" number="18.5">
<h2>
<span class="header-section-number">18.5</span> Преобразование растровых моделей в триангуляционные<a class="anchor" aria-label="anchor" href="#threed-modelling-rastertotin"><i class="fas fa-link"></i></a>
</h2>
<p><a href="threed-modelling.html#threed-modelling">В начало упражнения ⇡</a></p>
<p>До этого момента вы использовали растровые модели, которые удобны для вычислений. Их также можно использовать и в трехмерной среде. Однако, чтобы обеспечить максимальную производительность и качество визуализации, растровые модели желательно преобразовать в триангуляционные, поскольку именно на них основаны методы трехмерной визуализации.</p>
<ol style="list-style-type: decimal">
<li><p>Запустите инструмент геообработки <strong>3D Analyst Tools &gt; Conversion &gt; From Raster &gt; Raster to TIN</strong>.</p></li>
<li><p>В качестве <strong>Input Raster</strong> выберите <em>ЦМР</em>.</p></li>
<li><p>В поле <strong>Output TIN</strong> назовите выходной слой <em>tin</em>.</p></li>
<li>
<p>Параметр допуска по высоте <strong>Z Tolerance</strong> установите равным <em>0,25</em> метров.</p>
<blockquote>
<p>Параметр <strong>Z Tolerance</strong> управляет чувствительностью триангуляционной модели к неровностям поверхности. Если величина неровности больше, чем указанный порог, она будет выражена в виде набора треугольников. В нашем случае сечение исходных горизонталей было 2 метра, а вспомогательных горизонталей — 1 м. Точность положения горизонталей — ¼ сечения. Следовательно, значение порога, равное 0,25 метра позволит сохранить все нюансы поверхности.</p>
</blockquote>
</li>
<li><p>Максимальное количество точек <strong>Maximum Number Of Points</strong> увеличьте до <em>3 000 000</em> (три миллиона). Это значение подобрано для вас эмпирически.</p></li>
<li>
<p>Множитель по высоте <strong>Z factor</strong> оставьте равным <em>1</em>. Окно инструмента примет вид, аналогичный представленному на Рис. 9.</p>
<div class="figure">
<img src="images/Ex18/image10.png" alt=""><p class="caption"><em>Рис. 9. Инструмент Raster to TIN для преобразования растровых моделей в триангуляционные</em></p>
</div>
</li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить преобразование.</p></li>
<li><p>Повторите процедуру преобразования для слоя <em>ЦМР+</em>. В диалоге инструмента назовите выходной слой <em>tin+</em>.</p></li>
<li><p>Полученный слой <em>tin+</em> поместите в таблице содержания так, чтобы он был под слоями гидрографии. Все слои, кроме <em>tin+</em> и гидрографии отключите.</p></li>
<li><p>Дважды щелкните на слое <em>tin+</em> и перейдите на вкладку <strong>Symbology</strong>.</p></li>
<li><p>Выберите в списке слева метод отображения <em>Edge Types</em> — он отвечает за показ ребер триангуляции.</p></li>
<li><p>Щелкните внизу на кнопку <strong>Add All Values</strong>, чтобы добавить к отображению все типы ребер.</p></li>
<li><p>Исправьте цвет стандартного ребра <em>Regular Edge</em> на черный и нажмите <strong>ОК</strong>.</p></li>
<li>
<p>Приблизьтесь к лесному массиву в центральной части карты к северу от <em>Протвы</em>. Окно карты примет вид, аналогичный представленному на (Рис. 10).</p>
<div class="figure">
<img src="images/Ex18/image11.png" alt=""><p class="caption"><em>Рис. 10. Триангуляционная модель рельефа с лесным массивом</em></p>
</div>
</li>
</ol>
<blockquote>
<p>Проанализируйте свойства триангуляционной модели. Является ли плотность треугольников и их размеры постоянными? Обратите внимание, как сгущается сетка на участках с большой кривизной поверхности.</p>
</blockquote>
<p>Сохраните документ карты и сверните окно.</p>
<p><kbd><strong>Снимок экрана №2.</strong> Триангуляционная модель рельефа долины реки Протвы с лесным массивом</kbd></p>
</div>
<div id="threed-modelling-arcscene" class="section level2" number="18.6">
<h2>
<span class="header-section-number">18.6</span> Визуализация данных в трехмерной среде и знакомство с приложением ArcScene<a class="anchor" aria-label="anchor" href="#threed-modelling-arcscene"><i class="fas fa-link"></i></a>
</h2>
<p><a href="threed-modelling.html#threed-modelling">В начало упражнения ⇡</a></p>
<p>Несмотря на то, что анализ зон видимости можно проводить и в традиционной двумерной среде, более наглядно результат выглядит в трехмерной сцене, особенно когда есть несколько местоположений наблюдателя с разными высотами.</p>
<p>Для работы в трехмерной среде в <strong>ArcGIS</strong> используется приложение <strong>ArcScene</strong>. Это инструмент визуализации, анализа и редактирования трехмерных данных.</p>
<ol style="list-style-type: decimal">
<li><p>Откройте приложение <strong>Пуск—Программы &gt; ArcGIS &gt; ArcScene</strong>.</p></li>
<li><p>Сохраните сразу же документ сцены в свой каталог <em>Ex18</em> под названием <em>Ex18_3D.sxd</em>.</p></li>
<li><p>Раскройте домашнюю директорию в окне <strong>Каталога</strong>, щелкните правой кнопкой мыши на базе геоданных <em>Ex18.gdb</em> и выберите пункт <strong>Make Default Geodatabase</strong>, чтобы назначить ее базой геоданных по умолчанию, если это еще не сделано.</p></li>
<li>
<p>Откройте панель инструментов <strong>Tools</strong> и обратите внимание на то, что она несколько отличается от привычной вам панели инструментов в <strong>Аркмапе</strong>. Самый первый инструмент используется для вращения сцены.</p>
<div class="figure">
<img src="images/Ex18/image12.png" alt=""><p class="caption"><em>Рис. 11. Панель инструментов <strong>Tools</strong> в <strong>ArcScene</strong> </em></p>
</div>
</li>
<li>
<p>Добавьте на карту слой <em>PhotoPlan</em> из базы геоданных <em>Satino</em>.</p>
<blockquote>
<p>Обратите внимание на то, что снимок отображается плоским. Системе известна лишь информация о цвете каждого пиксела, но не о его высоте.</p>
</blockquote>
</li>
<li><p>Откройте свойства слоя и перейдите на вкладку <strong>Base Heights</strong> (базовые высоты).</p></li>
<li><p>Установите параметр <strong>Elevation from surfaces</strong> в положение <em>Floating on a custom surface</em>.</p></li>
<li><p>Нажмите кнопку обзора каталогов <img src="images/Ex18/image13.png"> и укажите модель <em>tin+</em> в качестве источника высот.</p></li>
<li><p>На вкладке <strong>Symbology</strong> в группе <strong>Stretch</strong> установите параметр <strong>Type</strong> равным <em>None</em>. Этот параметр отвечает за растяжку гистограммы, которая в случае фотоснимка не нужна.</p></li>
<li><p>Перейдите на вкладку <strong>Display</strong> и установите параметр <strong>Resample during display using</strong> равным <em>Cubic Convolution</em> (кубическая свертка). В этом режиме изображение будет всегда сглаживаться независимо от масштаба сцены.</p></li>
<li><p>Перейдите на вкладку <strong>Rendering</strong> поставьте галочку <strong>Shade areal features relative to the scene’s light position</strong>. В этом режиме снимок на снимок будет накладываться тень в соответствии с параметрами освещения сцены.</p></li>
<li>
<p>На той же вкладке в группе настроек <strong>Optimize</strong> переместите ползунок <strong>Quality enhancement for raster images</strong> в крайнее правое положение для того чтобы снимок отображался в максимальном качестве. Диалог настройки слоя примет вид, аналогичный представленному на Рис. 12.</p>
<div class="figure">
<img src="images/Ex18/image14.png" alt=""><p class="caption"><em>Рис. 12. Настройка параметров рендеринга для аэрофотоснимка</em></p>
</div>
</li>
<li><p>Нажмите <strong>ОК</strong> в настройках слоя. Вам придется подождать некоторое время, пока снимок драпируется на поверхность модели.</p></li>
<li><p>Добавьте на карту слои <em>WaterLine</em> и <em>WaterPolygon</em> из базы геоданных <em>Satino</em> и переместите их наверх таблицы содержания.</p></li>
<li><p>Откройте свойства слоя <em>Гидрография (полигоны)</em> двойным щелчком.</p></li>
<li><p>Перейдите на вкладку <strong>Symbology</strong> и смените цвет заливки на ярко-голубой, и уберите обводку (поставьте <em>No Color</em>).</p></li>
<li><p>Перейдите на вкладку <strong>Display</strong> и установите прозрачность слоя (<strong>Transparency</strong>) равной <em>30%</em>.</p></li>
<li><p>Перейдите на вкладку <strong>Base Heights</strong> и установите параметр <strong>Elevation from surfaces</strong> в положение <em>Floating on a custom surface.</em> Нажмите кнопку обзора каталогов и укажите в качестве источника модель <em>tin</em>.</p></li>
<li><p>Нажмите <strong>ОК</strong> в свойствах слоя.</p></li>
<li>
<p>Настройте аналогичным образом слой <em>Гидрография (линии)</em>, сменив цвет линии на голубой и включив опцию <strong>Floating on a custom surface</strong>.</p>
<p>Полученная сцена имеет один недостаток: необходимо увеличить масштаб по высоте, чтобы изображение стало более наглядным.</p>
</li>
<li><p>Дважды щелкните в таблице содержания на заголовке <strong>Scene Layers</strong> и установите параметр <strong>Vertical Exxageration</strong> равным <em>3</em>. Нажмите <strong>ОК</strong>.</p></li>
<li>
<p>Окно приложения примет вид, аналогичный представленному на Рис. 13.</p>
<div class="figure">
<img src="images/Ex18/image15.png" alt=""><p class="caption"><em>Рис. 13. Снимок, драпированный поверх ЦМР с высотами растительности</em></p>
</div>
<blockquote>
<p>Что изменилось в сцене после установки параметра Vertical Exxageration? Как он влияет на отображение слоев?</p>
</blockquote>
</li>
</ol>
</div>
<div id="threed-modelling-geodesy" class="section level2" number="18.7">
<h2>
<span class="header-section-number">18.7</span> Визуализация трехмерных объектов: геодезические пункты и здания<a class="anchor" aria-label="anchor" href="#threed-modelling-geodesy"><i class="fas fa-link"></i></a>
</h2>
<p><a href="threed-modelling.html#threed-modelling">В начало упражнения ⇡</a></p>
<p>В сцену необходимо добавить здания, которые играют роль дополнительных препятствий и геодезические пункты, с которых производятся наблюдения. До этого момента вы пользовались функцией драпировки объектов на поверхность. Здания и геодезические пункты, напротив, хранятся в базе данных как трехмерные объекты.</p>
<ol style="list-style-type: decimal">
<li><p>Добавьте на карту слой <em>Geopoints_3D</em> из базы данных <em>Satino</em>.</p></li>
<li><p>Дважды щелкните на слое <em>Геодезические пункты 3D</em> в таблице содержания и на вкладке <strong>Symbology</strong> щелкните на кнопку с изображением символа.</p></li>
<li><p>В открывшемся диалоге нажмите кнопку <strong>Style References</strong>, чтобы подгрузить дополнительные символы.</p></li>
<li>
<p>Отметьте в списке набор символов <em>3D Industrial</em> (Рис. 14) и нажмите <strong>ОК</strong>.</p>
<div class="figure">
<img src="images/Ex18/image16.png" alt=""><p class="caption"><em>Рис. 14. Подключение набора символов через Symbol Selector</em></p>
</div>
</li>
<li>
<p>Найдите в таблице символ <em>WatchTower 1</em>, выберите его и установите размер <em>40 пикселов</em>. Диалог настройки символа примет вид, аналогичный представленному на Рис. 15.</p>
<div class="figure">
<img src="images/Ex18/image17.png" alt=""><p class="caption"><em>Рис. 15. Выбор символа для геодезического пункта (Watch Tower 1)</em></p>
</div>
</li>
<li><p>Нажмите <strong>ОК</strong>, чтобы завершить настройку символа для геодезического пункта.</p></li>
<li><p>Добавьте на карту слой <em>Buildings_3D</em> из базы данных <em>Satino</em>. Это трехмерные объекты типа <strong>Multipatch</strong>, у которых была заранее определена высота.</p></li>
<li>
<p>Приблизьтесь к участку поймы между деревнями <em>Дедюевка</em> и <em>Рыжково</em>. Окно приложения примет вид, аналогичный представленному на Рис. 16.</p>
<div class="figure">
<img src="images/Ex18/image18.png" alt=""><p class="caption"><em>Рис. 16. Трехмерные данные для анализа зон видимости и открытости небосвода</em></p>
</div>
<p><kbd><strong>Снимок экрана №3</strong>. Визуализация исходных данных для анализа зон видимости: рельеф, снимок, геодезические пункты и трехмерные здания</kbd></p>
</li>
</ol>
</div>
<div id="threed-modelling-viewshed" class="section level2" number="18.8">
<h2>
<span class="header-section-number">18.8</span> Анализ зоны видимости наблюдательного пункта<a class="anchor" aria-label="anchor" href="#threed-modelling-viewshed"><i class="fas fa-link"></i></a>
</h2>
<p><a href="threed-modelling.html#threed-modelling">В начало упражнения ⇡</a></p>
<p>Зона видимости строится для определенной точки в трехмерном пространстве. В качестве наблюдательных точек удобно использовать геодезические пункты. Сначала вы определите зону видимости с точки, расположенной на земле, а затем приподнимете ее на несколько метров, чтобы понять, как изменится зона видимости.</p>
<ol style="list-style-type: decimal">
<li><p>Откройте атрибутивную таблицу слоя Геодезические пункты 3D и выделите строку с геодезическим пунктом <em>Старое русло</em>. Строка должна выделиться ярко-голубым цветом.</p></li>
<li><p>Запустите инструмент геообработки <strong>3D Analyst Tools &gt; Visibility &gt; Skyline</strong>, который строит линию небосвода.</p></li>
<li><p>В качестве слоя точек наблюдений <strong>Input Observer Point Features</strong> выберите <em>Геодезические пункты 3D</em>. Поскольку вы выделили объект в таблице этого слоя, линия небосвода будет рассчитана только для него, а не для всех объектов.</p></li>
<li><p>В поле <strong>Input Surface</strong> выберите поверхность <em>tin+</em> с помощью обзора каталогов.</p></li>
<li><p>Из списка препятствий <strong>Input Features</strong> выберите слой <em>Здания 3D</em>. Диалог инструмента и окно приложения примут вид, аналогичный представленному на Рис. 17.</p></li>
<li>
<p>Нажмите <strong>ОК</strong>, чтобы запустить расчеты.</p>
<div class="figure">
<img src="images/Ex18/image19.png" alt=""><p class="caption"><em>Рис. 17. Инструмент Skyline для построения линии небосвода</em></p>
</div>
</li>
<li><p>После того, как результат будет добавлен в таблицу содержания, смените его название на <em>Линия небосвода (Старое русло)</em> и смените символ на ярко-желтую линию.</p></li>
<li><p>Запустите инструмент <strong>3D Analyst Tools &gt; Visibility &gt; Skyline Barrier</strong>, который строит трехмерную зону видимости на основе линии небосвода.</p></li>
<li><p>Выберите в качестве <strong>Input Observer Point Features</strong> слой <em>Геодезические пункты 3D</em>.</p></li>
<li><p>В качестве <strong>Input Features</strong> выберите слой <em>Линия небосвода (Старое русло)</em>.</p></li>
<li><p>Установите галочку <em>Closed</em>, чтобы сформировать боковые стенки зоны видимости.</p></li>
<li><p>Остальные параметры оставьте по умолчанию.</p></li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить расчеты.</p></li>
<li><p>После того, как результат добавится в таблицу содержания, переименуйте его в Зона видимости (Старое русло).</p></li>
<li>
<p>Смените цвет слоя зоны видимости на ярко-желтый и установите прозрачность слоя равной <em>50%</em>. Окно приложения примет вид, аналогичный представленному на Рис. 18:</p>
<div class="figure">
<img src="images/Ex18/image20.png" alt=""><p class="caption"><em>Рис. 18. Результат расчета зоны видимости для пункта Старое русло</em></p>
</div>
<p><kbd><strong>Снимок экрана №4.</strong> Результат расчета зоны видимости пункта Старое русло</kbd></p>
</li>
</ol>
<blockquote>
<p>Проанализируйте результат. Приблизьтесь поближе, чтобы рассмотреть полученные границы. Как ведет себя линия небосвода при встрече с препятствиями?</p>
</blockquote>
</div>
<div id="threed-modelling-height" class="section level2" number="18.9">
<h2>
<span class="header-section-number">18.9</span> Изменение высоты наблюдения<a class="anchor" aria-label="anchor" href="#threed-modelling-height"><i class="fas fa-link"></i></a>
</h2>
<p><a href="threed-modelling.html#threed-modelling">В начало упражнения ⇡</a></p>
<p>Рассмотрим теперь, как изменится зона видимости, если переместиться в пункт, расположенный более высоко.</p>
<ol style="list-style-type: decimal">
<li><p>Выберите в таблице атрибутов слоя <em>Геодезические пункты 3D</em> строку <em>Дедюевка</em>. Строка должна выделиться ярко-голубым цветом.</p></li>
<li><p>Запустите инструмент <strong>Skyline</strong> еще раз для построения линии небосвода.</p></li>
<li><p>В параметр <strong>Input Observer Point Features</strong> подставьте слой <em>Геодезические пункты 3D</em>.</p></li>
<li><p>В поле <strong>Input Surface</strong> выберите поверхность <em>tin+</em> с помощью обзора каталогов.</p></li>
<li><p>Из списка препятствий <strong>Input Features</strong> выберите слой <em>Здания 3D</em>. Остальные параметры оставьте по умолчанию и запустите инструмент.</p></li>
<li><p>Получившийся слой переименуйте в <em>Линия небосвода (Дедюевка)</em> и смените его символ на ярко-красную линию.</p></li>
<li><p>Запустите снова инструмент <strong>Skyline Barrier</strong> для построения зоны видимости.</p></li>
<li><p>Выберите в качестве <strong>Input Observer Point Features</strong> слой <em>Геодезические пункты 3D</em>.</p></li>
<li><p>В качестве <strong>Input Features</strong> выберите слой <em>Линия небосвода (Дедюевка)</em>.</p></li>
<li><p>Установите галочку <strong>Closed</strong>, чтобы сформировать боковые стенки зоны видимости.</p></li>
<li><p>Остальные параметры оставьте по умолчанию и запустите инструмент, нажав <strong>ОК</strong>.</p></li>
<li><p>Переименуйте получившийся слой в <em>Зона видимости (Дедюевка)</em>, смените его цвет на розовый и установите прозрачность равной <em>50%</em>.</p></li>
<li><p>Отключите слои <em>Линия небосвода (Старое русло)</em> и <em>Зона видимости (Старое русло)</em>.</p></li>
<li>
<p>Нажмите <strong>глобус</strong>, чтобы вся сцена поместилась на в окне просмотра (Рис. 19).</p>
<div class="figure">
<img src="images/Ex18/image21.png" alt=""><p class="caption"><em>Рис. 19. Зона видимости, построенная для пункта Дедюевка</em></p>
</div>
<p><kbd><strong>Снимок экрана №5</strong>. Результат расчета зоны видимости пункта Дедюевка</kbd></p>
<blockquote>
<p>Проанализируйте, как изменилась зона видимости после выбора более высокой точки.</p>
</blockquote>
</li>
</ol>
<p>Сохраните документ сцены еще раз. Положите ваш отчетный файл в сетевую папку преподавателя.</p>
</div>
<div id="threed-modelling-questions" class="section level2" number="18.10">
<h2>
<span class="header-section-number">18.10</span> Контрольные вопросы<a class="anchor" aria-label="anchor" href="#threed-modelling-questions"><i class="fas fa-link"></i></a>
</h2>
<p><a href="threed-modelling.html#threed-modelling">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Опишите сути и отличия растровой и триангуляционной моделей рельефа</p></li>
<li><p>На что влияет параметр допуска по высоте (z tolerance) при преобразовании растровой модели в триангуляционную?</p></li>
<li><p>Каким эффектом обладает параметр преувеличения по высоте (vertical exxageration) применительно к цифровой модели рельефа? Меняет ли этот параметр сами цифровые данные о высотах?</p></li>
<li><p>Какие действия необходимо выполнить для того чтобы положить снимок на трехмерную цифровую модель рельефа?</p></li>
<li><p>Что такое линия зона видимости и линия небосвода? Как они соотносятся?</p></li>
<li><p>Как влияет высота точки наблюдения на конфигурацию зоны видимости?</p></li>
</ol>
</div>
</div>



  <div class="chapter-nav">
<div class="prev"><a href="interpolation.html"><span class="header-section-number">17</span> Пространственная интерполяция</a></div>
<div class="next"><a href="manual-catalog.html"><span class="header-section-number">A</span> Работа с окном каталога</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#threed-modelling"><span class="header-section-number">18</span> Трехмерное моделирование</a></li>
<li>
<a class="nav-link" href="#threed-modelling-intro"><span class="header-section-number">18.1</span> Введение</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#threed-modelling-control"><span class="header-section-number">18.1.1</span> Контрольный лист</a></li>
<li><a class="nav-link" href="#threed-modelling-annotation"><span class="header-section-number">18.1.2</span> Аннотация</a></li>
</ul>
</li>
<li><a class="nav-link" href="#threed-modelling-workspace"><span class="header-section-number">18.2</span> Организация рабочего пространства</a></li>
<li><a class="nav-link" href="#threed-modelling-demviz"><span class="header-section-number">18.3</span> Визуализация цифровой модели рельефа</a></li>
<li><a class="nav-link" href="#threed-modelling-additional"><span class="header-section-number">18.4</span> Подготовка вспомогательных цифровых моделей для учета препятствий</a></li>
<li><a class="nav-link" href="#threed-modelling-rastertotin"><span class="header-section-number">18.5</span> Преобразование растровых моделей в триангуляционные</a></li>
<li><a class="nav-link" href="#threed-modelling-arcscene"><span class="header-section-number">18.6</span> Визуализация данных в трехмерной среде и знакомство с приложением ArcScene</a></li>
<li><a class="nav-link" href="#threed-modelling-geodesy"><span class="header-section-number">18.7</span> Визуализация трехмерных объектов: геодезические пункты и здания</a></li>
<li><a class="nav-link" href="#threed-modelling-viewshed"><span class="header-section-number">18.8</span> Анализ зоны видимости наблюдательного пункта</a></li>
<li><a class="nav-link" href="#threed-modelling-height"><span class="header-section-number">18.9</span> Изменение высоты наблюдения</a></li>
<li><a class="nav-link" href="#threed-modelling-questions"><span class="header-section-number">18.10</span> Контрольные вопросы</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Основы геоинформатики: практикум в ArcGIS</strong>" was written by Тимофей Самсонов. It was last built on 2023-02-14.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
