<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Упражнение 6 Привязка и векторизация (гидрогеологическая карта) | Основы геоинформатики: практикум в ArcGIS</title>
<meta name="author" content="Тимофей Самсонов">
<meta name="description" content="Скачать данные и файл отчета  6.1 Введение Цель задания — знакомство с привязкой, трансформированием и векторизацией геоизображений, элементами базовых технологий ГИС (оверлей, пространственные...">
<meta name="generator" content="bookdown 0.28 with bs4_book()">
<meta property="og:title" content="Упражнение 6 Привязка и векторизация (гидрогеологическая карта) | Основы геоинформатики: практикум в ArcGIS">
<meta property="og:type" content="book">
<meta property="og:description" content="Скачать данные и файл отчета  6.1 Введение Цель задания — знакомство с привязкой, трансформированием и векторизацией геоизображений, элементами базовых технологий ГИС (оверлей, пространственные...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Упражнение 6 Привязка и векторизация (гидрогеологическая карта) | Основы геоинформатики: практикум в ArcGIS">
<meta name="twitter:description" content="Скачать данные и файл отчета  6.1 Введение Цель задания — знакомство с привязкой, трансформированием и векторизацией геоизображений, элементами базовых технологий ГИС (оверлей, пространственные...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.0/transition.js"></script><script src="libs/bs3compat-0.4.0/tabs.js"></script><script src="libs/bs3compat-0.4.0/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="default">
<link rel="stylesheet" href="custom.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Основы геоинформатики: практикум в ArcGIS</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Введение</a></li>
<li class="book-part">Визуализация данных</li>
<li><a class="" href="map-design-quaternary.html"><span class="header-section-number">1</span> Карта четвертичных отложений</a></li>
<li><a class="" href="map-design-general.html"><span class="header-section-number">2</span> Общегеографическая карта</a></li>
<li><a class="" href="map-design-climates.html"><span class="header-section-number">3</span> Климатическая карта</a></li>
<li><a class="" href="map-design-economic.html"><span class="header-section-number">4</span> Социально-экономическая карта</a></li>
<li class="book-part">Базовые технологии ГИС</li>
<li><a class="" href="map-ref-general.html"><span class="header-section-number">5</span> Привязка и векторизация (туристская карта)</a></li>
<li><a class="active" href="map-ref-hydrogeologic.html"><span class="header-section-number">6</span> Привязка и векторизация (гидрогеологическая карта)</a></li>
<li><a class="" href="map-ref-economic.html"><span class="header-section-number">7</span> Привязка и векторизация (административная карта)</a></li>
<li><a class="" href="stat-map-economic.html"><span class="header-section-number">8</span> Соединение табличных данных</a></li>
<li><a class="" href="geocoding.html"><span class="header-section-number">9</span> Адресное геокодирование</a></li>
<li class="book-part">Векторный анализ</li>
<li><a class="" href="overlay.html"><span class="header-section-number">10</span> Пространственные взаимосвязи</a></li>
<li><a class="" href="land-cover-hydro.html"><span class="header-section-number">11</span> Пространственные соотношения</a></li>
<li><a class="" href="network-analysis.html"><span class="header-section-number">12</span> Транспортные сети</a></li>
<li><a class="" href="network-hydro.html"><span class="header-section-number">13</span> Гидрографические сети</a></li>
<li class="book-part">Растровый анализ</li>
<li><a class="" href="weighted-overlay.html"><span class="header-section-number">14</span> Оптимизация местоположения</a></li>
<li><a class="" href="dem.html"><span class="header-section-number">15</span> Цифровое моделирование рельефа</a></li>
<li class="book-part">Пространственное моделирование</li>
<li><a class="" href="density-analysis.html"><span class="header-section-number">16</span> Оценка плотности распределения</a></li>
<li><a class="" href="interpolation.html"><span class="header-section-number">17</span> Пространственная интерполяция</a></li>
<li><a class="" href="threed-modelling.html"><span class="header-section-number">18</span> Трехмерное моделирование</a></li>
<li class="book-part">Описание функций</li>
<li><a class="" href="manual-catalog.html"><span class="header-section-number">A</span> Работа с окном каталога</a></li>
<li><a class="" href="manual-toolbox.html"><span class="header-section-number">B</span> Геообработка</a></li>
<li><a class="" href="manual-gdb.html"><span class="header-section-number">C</span> База геоданных</a></li>
<li><a class="" href="manual-toc.html"><span class="header-section-number">D</span> Работа с таблицей слоев</a></li>
<li><a class="" href="manual-toolbar.html"><span class="header-section-number">E</span> Панели инструментов</a></li>
<li><a class="" href="manual-navigation.html"><span class="header-section-number">F</span> Навигация по карте</a></li>
<li><a class="" href="manual-vector.html"><span class="header-section-number">G</span> Оформление векторного слоя</a></li>
<li><a class="" href="manual-raster.html"><span class="header-section-number">H</span> Оформление растрового слоя</a></li>
<li><a class="" href="manual-labels.html"><span class="header-section-number">I</span> Подписи объектов</a></li>
<li><a class="" href="manual-attributes.html"><span class="header-section-number">J</span> Атрибутивная таблица</a></li>
<li><a class="" href="manual-select.html"><span class="header-section-number">K</span> Выборка объектов</a></li>
<li><a class="" href="manual-projections.html"><span class="header-section-number">L</span> Проекции и координатная сетка</a></li>
<li><a class="" href="manual-georef.html"><span class="header-section-number">M</span> Привязка растровых данных</a></li>
<li><a class="" href="manual-edit.html"><span class="header-section-number">N</span> Редактирование</a></li>
<li><a class="" href="manual-layout.html"><span class="header-section-number">O</span> Компоновка карт</a></li>
<li><a class="" href="manual-legend.html"><span class="header-section-number">P</span> Легенда карты</a></li>
<li><a class="" href="manual-export.html"><span class="header-section-number">Q</span> Экспорт изображения</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="map-ref-hydrogeologic" class="section level1" number="6">
<h1>
<span class="header-section-number">Упражнение 6</span> Привязка и векторизация (гидрогеологическая карта)<a class="anchor" aria-label="anchor" href="#map-ref-hydrogeologic"><i class="fas fa-link"></i></a>
</h1>
<p><a href="http://autolab.geogr.msu.ru/gis/data/Ex06.zip">Скачать данные и файл отчета</a></p>
<div id="map-ref-hydrogeologic-intro" class="section level2" number="6.1">
<h2>
<span class="header-section-number">6.1</span> Введение<a class="anchor" aria-label="anchor" href="#map-ref-hydrogeologic-intro"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Цель задания</strong> — знакомство с привязкой, трансформированием и векторизацией геоизображений, элементами базовых технологий ГИС (оверлей, пространственные запросы).</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Поток</em></td>
<td>Гидрометпоток, Физпоток</td>
</tr>
<tr class="even">
<td align="left"><em>Теоретическая подготовка</em></td>
<td>Системы координат и проекции на картах, привязка геоизображений, трансформирование геоизображений, векторизация геоизображений. Методы трансформации: аффинное, проективное, полиномиальное, метод резинового листа (сплайны). Пространственные запросы, атрибутивные запросы, оверлей.</td>
</tr>
<tr class="odd">
<td align="left"><em>Практическая подготовка</em></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Работа с базой геоданных. Настройка символики и подписей объектов.</td>
</tr>
<tr class="even">
<td align="left"><em>Исходные данные</em></td>
<td>Слои картографической основы (карт масштаба 1:2 500 000), растровая карта гидрогеологического районирования на район среднего течения Дона.</td>
</tr>
<tr class="odd">
<td align="left"><em>Результат</em></td>
<td>Слой гидрогеологического районирования в базе данных. Слой рек, обогащенный данными о принадлежности участков рек к артезианским бассейнам (<em>дополнительно</em>). Проект карты с оформленной компоновкой</td>
</tr>
<tr class="even">
<td align="left"><em>Ключевые слова</em></td>
<td>Системы координат, проекции, трансформирование координат, пространственная привязка, векторизация, оверлей, пространственные запросы, атрибутивные запросы</td>
</tr>
</tbody>
</table></div>
<div id="map-ref-hydrogeologic-control" class="section level3" number="6.1.1">
<h3>
<span class="header-section-number">6.1.1</span> Контрольный лист<a class="anchor" aria-label="anchor" href="#map-ref-hydrogeologic-control"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Привязать растровую карту к опорным данным</li>
<li>Создать в базе геоданных класс пространственных объектов для районов</li>
<li>Наполнить класс районов путем цифрования растровой карты</li>
<li>Заполнить названия районов и выполнить пространственный запрос рек по пересечению с разными бассейнами</li>
<li>Осуществить оверлей c целью разбить реки на участки, принадлежащие разным бассейнам, выполнить атрибутивный запрос по принадлежности</li>
<li>Подготовить проект гидрогеологической карты с компоновкой</li>
</ul>
</div>
<div id="map-ref-hydrogeologic-annotation" class="section level3" number="6.1.2">
<h3>
<span class="header-section-number">6.1.2</span> Аннотация<a class="anchor" aria-label="anchor" href="#map-ref-hydrogeologic-annotation"><i class="fas fa-link"></i></a>
</h3>
<p>Задание посвящено знакомству с привязкой растровых карт, созданием и наполнением баз пространственных данных путем векторизации растра, использованию оверлея, пространственных и атрибутивных запросов (дополнительно). Эти методы входят в число базовых технологий геоинформатики. В задании предлагается перевести в векторный вид карту гидрогеологического районирования среднего течения Дона и далее наполнить этой информацией участки рек, чтобы в дальнейшем определять источник питания участков рек по их принадлежности артезианским бассейнам.</p>
<blockquote>
<p><strong>Артезианские воды</strong> представляют собой одну из компонент питания рек. К артезианским водам относятся подземные воды, находящиеся в водоносных горизонтах, перекрытых и подстилаемых водоупорными (или относительно водоупорными) слоями горных пород, и обладающие гидростатическим напором.</p>
</blockquote>
</div>
</div>
<div id="map-ref-hydrogeologic-base" class="section level2" number="6.2">
<h2>
<span class="header-section-number">6.2</span> Оформление базовых слоев<a class="anchor" aria-label="anchor" href="#map-ref-hydrogeologic-base"><i class="fas fa-link"></i></a>
</h2>
<p><a href="map-ref-hydrogeologic.html#map-ref-hydrogeologic">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Скопируйте каталог <em>Ex06</em> в свою папку.</p></li>
<li><p>Откройте приложение <strong>ArcMap</strong>, создайте новый документ карты и сохраните его в свою папку <em>Ex06</em>.</p></li>
<li><p>Подключитесь в окне каталога к папке <em>Ex06</em>. Убедитесь, что в ней находится база геоданных <em>Don.gdb</em> и растровый файл <em>DonArtesian.png</em>.</p></li>
<li><p>Раскройте базу геоданных и перенесите на карту классы <em>Lakes</em> и <em>Rivers</em></p></li>
<li><p>Присвойте слою <em>Lakes</em> символ с голубой заливкой и синей обводкой.</p></li>
<li>
<p>Настройте оформление слоя <em>Rivers</em> следующим образом:</p>
<ul>
<li><p>Выберите метод <em>Unique values</em> (уникальные значения).</p></li>
<li><p>В качестве поля для отображения используйте атрибут <em>Тип</em>. Нажмите <strong>Add All Values</strong>.</p></li>
<li><p>Покрасьте все реки в синий цвет. Для этого щелкните на заголовке первого столбца <strong>Symbol</strong> и вызовите команду <strong>Properties for all symbols</strong>. Выберите <em>точно такой же цвет</em>, что вы использовали для обводки озер.</p></li>
<li>
<p>Установите следующие параметры толщины линий:</p>
<table class="table table-sm">
<thead><tr class="header">
<th align="left">Слой</th>
<th>Толщина линии</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Реки постоянные крупные</em></td>
<td>2 пункта</td>
</tr>
<tr class="even">
<td align="left"><em>Реки постоянные средние</em></td>
<td>1,5 пункта</td>
</tr>
<tr class="odd">
<td align="left"><em>Остальные классы</em></td>
<td>1 пункт</td>
</tr>
</tbody>
</table>
</li>
</ul>
<p>Диалог примет следующий вид (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-sym">6.1</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-sym"></span>
<img src="images/Ex06/image7.png" alt="Настройка параметров толщины линий" width="80%"><p class="caption">
Рис. 6.1: Настройка параметров толщины линий
</p>
</div>
</li>
<li><p>Включите опцию подписи рек. Перейдите на вкладку <strong>Labels</strong> и отметьте флажок <strong>Label features in this layer</strong>. Выберите поле <em>Название</em> в качестве поля для подписей, смените их цвет на темно-синий и установите криволинейное размещение вдоль линии. Нажмите ОК. В результате операции все реки будут подписаны.</p></li>
<li>
<p>Чтобы были подписаны только крупнейшие реки, необходимо использовать определяющий запрос на языке <strong>SQL</strong>. Для этого откройте снова свойства слоя и на вкладке <strong>Labels</strong> выберите метод «<em>Define classes of features and label each class separately</em>». Нажмите кнопку <strong>SQL query…</strong> и введите в поле следующий текст запроса:</p>
<p><code>"CLASS" = 2 OR "CLASS" = 3</code></p>
<p>Чтобы избежать ошибок ввода, вы можете дважды щелкнуть на поле <code>CLASS</code> в списке слева — оно подставится в запрос. Добавьте знак <code>=</code>. Далее нажмите кнопку <strong>Get unique values</strong> и найдите 2-й класс. Щелкните на нем дважды — после этого название поля подставится в текст запроса. После этого введите оператор <code>OR</code> и повторите ввод для 3-го класса. Диалог примет следующий вид (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-sql">6.2</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-sql"></span>
<img src="images/Ex06/image8.png" alt="Диалог SQL-запроса" width="50%"><p class="caption">
Рис. 6.2: Диалог SQL-запроса
</p>
</div>
</li>
<li><p>Нажмите <strong>Verify</strong>, чтобы проверить корректность введенного запроса. Если ответ положительный, закройте всплывшее сообщение. Если появляется сообщение об ошибке в запросе, убедитесь, что он введен в соответствии с примером.</p></li>
<li>
<p>Нажмите <strong>ОК</strong> в диалоге свойств слоя. Карта примет следующий вид (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-riv">6.3</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-riv"></span>
<img src="images/Ex06/image9.png" alt="Диалог SQL-запроса" width="100%"><p class="caption">
Рис. 6.3: Диалог SQL-запроса
</p>
</div>
</li>
<li><p>Сохраните документ карты в <em>свою</em> папку <em>Ex06</em> под именем <em>Don.mxd</em>.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №1</strong> — <em>Реки</em></kbd></p>
</div>
<div id="map-ref-hydrogeologic-referencing" class="section level2" number="6.3">
<h2>
<span class="header-section-number">6.3</span> Привязка растровой карты по контрольным точкам<a class="anchor" aria-label="anchor" href="#map-ref-hydrogeologic-referencing"><i class="fas fa-link"></i></a>
</h2>
<p><a href="map-ref-hydrogeologic.html#map-ref-hydrogeologic">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Добавьте на карту из базы данных слой <em>DonArtesian.png</em> и поместите его непосредственно под слоем Rivers. При добавлении слоя появится диалоговое окно, предупреждающее о том, что файл не имеет привязки. Закройте его.</p></li>
<li>
<p>Поместите карту в центр окна <strong>ArcMap</strong>.</p>
<blockquote>
<p>Для выполнения дальнейшей работы прочтите раздел <strong><a href="manual-georef.html#manual-georef">Привязка растровых данных</a></strong> в приложении.</p>
</blockquote>
</li>
<li><p>Откройте панель инструментов <strong>Georeferencing</strong>. Убедитесь, что в ее списке выбран файл <em>DonArtesian</em>. Выберите в ее меню команду <strong>Fit to Display</strong>, чтобы переместить непривязанный растр на середину области отображения.</p></li>
<li><p>Поместите растр непосредственно под слоем <em>Rivers</em>.</p></li>
<li>
<p>Используя инструмент расстановки контрольных точек, укажите пять контрольных точек в разных частях карты. Желательно, чтобы точки были равномерно распределены по полю карты (по краям и в центре) и <em>не располагались на одной линии</em> — это обеспечит хорошие коэффициенты трансформации. В качестве точек используйте места впадения притоков и впадения рек в водохранилища. Например, можно использовать точку впадения реки Хопёр в реку Дон (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-cpt">6.4</a>, <a href="map-ref-hydrogeologic.html#fig:mrh-cpu">6.5</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-cpt"></span>
<img src="images/Ex06/image10.png" alt="Расстановка одной пары контрольных точек" width="50%"><p class="caption">
Рис. 6.4: Расстановка одной пары контрольных точек
</p>
</div>
<div class="figure">
<span style="display:block;" id="fig:mrh-cpu"></span>
<img src="images/Ex06/image11.png" alt="Результат привязки изображения в окрестности одной пары контрольных точек" width="50%"><p class="caption">
Рис. 6.5: Результат привязки изображения в окрестности одной пары контрольных точек
</p>
</div>
</li>
<li>
<p>Ознакомьтесь с доступными методами трансформирования по контрольным точкам. Для этого в меню <strong>Georeferencing</strong> выберите команду <strong>Transformation</strong>. По умолчанию выбрано аффинное преобразование.</p>
<blockquote>
<p><strong>Какие еще виды трансформирования доступны?</strong> Чем проективное преобразование отличается от аффинного?</p>
</blockquote>
<p>Оставьте выбранным аффинное преобразование.</p>
</li>
<li>
<p>Осуществите трансформирование растра. На панели инструментов <strong>Georeferencing</strong> выберите команду меню <strong>Georeferencing &gt; Update Georeferencing</strong>. Контрольные точки удалятся.</p>
<p>Картографическое изображение примет следующий вид (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-ref">6.6</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-ref"></span>
<img src="images/Ex06/image12.png" alt="Привязанная растровая карта" width="100%"><p class="caption">
Рис. 6.6: Привязанная растровая карта
</p>
</div>
<p><kbd><strong>Снимок экрана №2</strong> — <em>Привязанная растровая карта</em></kbd></p>
</li>
<li><p>Сохраните документ карты в формате mxd в папке отчета.</p></li>
</ol>
</div>
<div id="map-ref-hydrogeologic-regions" class="section level2" number="6.4">
<h2>
<span class="header-section-number">6.4</span> Векторизация слоя гидрогеологического районирования<a class="anchor" aria-label="anchor" href="#map-ref-hydrogeologic-regions"><i class="fas fa-link"></i></a>
</h2>
<p><a href="map-ref-hydrogeologic.html#map-ref-hydrogeologic">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li>
<p><strong><a href="manual-gdb.html#manual-gdb-create-class">Создайте</a></strong> новый класс пространственных объектов в базе геоданных <em>Don.gdb</em>. Для этого:</p>
<ul>
<li><p>На первом шаге назовите слой <em>Artesian</em>, выберите площадную модель пространственных объектов (<em>Polygon features</em>).</p></li>
<li><p>На втором шаге выберите систему координат. Оптимально использовать ту же систему, что используется в базовых данных. Для этого ее можно импортировать у существующего слоя. Нажмите <strong>Add Coordinate Systems &gt; Import</strong>, найдите и укажите любой слой в базе данных <em>Don.gdb</em>.</p></li>
<li><p>На 3-м и 4-м шагах оставьте все параметры по умолчанию.</p></li>
<li><p>На 5-м шаге добавьте в первую пустую строку новое поле <em>Basin</em>. Тип поля — <em>Text</em>. В этом поле вы будете хранить название гидрогеологического бассейна.</p></li>
<li><p>Нажмите <strong>Finish</strong>.</p></li>
</ul>
</li>
<li><p>Добавьте получившийся слой на карту и разместите его вверху таблицы содержания.</p></li>
<li>
<p>Отключите слои рек и озер.</p>
<blockquote>
<p>Для выполнения дальнейшей работы прочтите раздел <strong><a href="manual-edit.html#manual-edit">Редактирование</a></strong> в приложении.</p>
</blockquote>
</li>
<li><p>Включите режим редактирования слоя. Для этого в его контекстном меню выберите команду <strong>Edit Features &gt; Start Editing</strong>.</p></li>
<li><p>Откройте список шаблонов слоя и посмотрите доступные опции редактирования в нижней части окна.</p></li>
<li>
<p>Векторизуйте все бассейны, обведя их границы. Выполняйте работу в следующей последовательности:</p>
<ul>
<li><p>Сначала векторизуйте <em>Донецко-Донской бассейн (IV)</em> с помощью обычного инструмента <strong>Polygon</strong>.</p></li>
<li><p>Далее последовательно пристыкуйте к нему оставшиеся бассейны с помощью инструмента <strong>Auto Complete Polygon</strong>. Замкните их по границе листа.</p></li>
</ul>
</li>
<li><p>После того как векторизация районов завершена, сохраните изменения, выбрав команду <strong>Editor &gt; Save Edits</strong>.</p></li>
<li>
<p>Откройте таблицу атрибутов слоя районов. Поочередно выделяя каждый из них (для этого щелкните в самом начале строки), введите в поле <em>Basin</em> его название, ориентируясь по выделению на карте. Слово «бассейн» не вводите (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-att">6.7</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-att"></span>
<img src="images/Ex06/image13.png" alt="Редактирование атрибута выбранного объекта" width="100%"><p class="caption">
Рис. 6.7: Редактирование атрибута выбранного объекта
</p>
</div>
</li>
<li><p>После ввода названий снова сохраните изменения.</p></li>
<li><p>Завершите редактирование, выбрав команду <strong>Editor &gt; Stop Editing</strong>.</p></li>
<li><p>Измените оформление слоя в соответствии с цветами на исходном растре.</p></li>
<li><p>Включите подписи районов по полю <em>Basin</em>.</p></li>
<li>
<p>Отключите слой растровой карты. Включите снова слои рек и озер и переместите их вверх таблицы содержания. Картографическоем изображение примет следующий вид (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-vec">6.8</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-vec"></span>
<img src="images/Ex06/image14.png" alt="Векторизованный слой артезианских бассейнов" width="100%"><p class="caption">
Рис. 6.8: Векторизованный слой артезианских бассейнов
</p>
</div>
</li>
<li><p>Сохраните документ карты в папке отчета.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №3</strong> — <em>Слой артезианских бассейнов</em></kbd></p>
</div>
<div id="map-ref-hydrogeologic-design" class="section level2" number="6.5">
<h2>
<span class="header-section-number">6.5</span> Оформление карты<a class="anchor" aria-label="anchor" href="#map-ref-hydrogeologic-design"><i class="fas fa-link"></i></a>
</h2>
<p><a href="map-ref-hydrogeologic.html#map-ref-hydrogeologic">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li>
<p>Добавьте на карту слои <em>Boundaries</em> (границы) и <em>Cities</em> (города). Используйте для их отображения способ <strong>Categories</strong> и настройте отображение разными символами классов границ, а также городов в соответствии с численностью населения. При оформлении подписей городов используйте метод <a href="manual-labels.html#manual-labels-class"><strong>классифицированных подписей</strong></a>. Пример результирующего изображения (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-map">6.9</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-map"></span>
<img src="images/Ex06/image24.png" alt="Оформленное картографическое изображение" width="100%"><p class="caption">
Рис. 6.9: Оформленное картографическое изображение
</p>
</div>
<p><kbd><strong>Снимок экрана №4</strong> — Карта</kbd></p>
</li>
<li><p>Переключитесь в режим компоновки и оформите легенду карты. Добавьте название «<em>Гидрогеологическое районирование среднего течения Дона</em>», а также масштаб и свои ФИО.</p></li>
<li><p>Экспортируйте результирующую карту в файл в формате <em>PNG</em> и вставьте ее в отчет.</p></li>
</ol>
<blockquote>
<p><strong>Следующие разделы являются дополнительными и выполняются на усмотрение преподавателя</strong>. Перед их выполнением целесообразно ознакомиться с разделом <strong><a href="manual-select.html#manual-select">Выборка объектов</a></strong> в приложении.</p>
</blockquote>
</div>
<div id="map-ref-hydrogeologic-query" class="section level2" number="6.6">
<h2>
<span class="header-section-number">6.6</span> Пространственный запрос (дополнительно)<a class="anchor" aria-label="anchor" href="#map-ref-hydrogeologic-query"><i class="fas fa-link"></i></a>
</h2>
<p><a href="map-ref-hydrogeologic.html#map-ref-hydrogeologic">В начало упражнения ⇡</a></p>
<p>Для получения информации о взаимном положении объектов или поиске объектов, основанном на их местоположении, вы можете использовать три метода:</p>
<ul>
<li>Вычисление расстояний</li>
<li>Пространственный запрос</li>
<li>Оверлей</li>
</ul>
<p>Вычисление расстояний позволяет оценить попарные расстояния между объектами, найти для каждого объекта ближайший к нему. Пространственный запрос осуществляет выборку объектов, находящихся в указанных топологических отношениях с другими объектами. Например, вы можете сказать «<em>выбрать реки, находящиеся целиком внутри (completely within) Московского артезианского бассейна</em>» или смягчить запрос, указав «<em>выбрать реки, пересекающие (intersect) Московский артезианский бассейн</em>». Частным случаем пространственного запроса также является поиск объектов по координатам, диапазону координат или произвольно заданной области. В этом случае пользователь чаще всего обводит на карте прямоугольником интересующую его зону, при этом выбираются объекты, пересекающие или находящиеся целиком внутри выделенной зоны.</p>
<p>Рассмотрим, как можно выберать реки, принадлежащие Приволжско-Хоперскому бассейну.</p>
<ol style="list-style-type: decimal">
<li><p>Выделите на карте Приволжско-Хоперский бассейн, используя инструмент <img src="images/Ex06/image15.png"> на панели <strong>Tools</strong>.</p></li>
<li><p>Откройте диалог пространственной выборки (<strong>Selection &gt; Select by Location</strong>)</p></li>
<li><p>Выберите в диалоге пространственной выборки слой <em>Rivers</em> в качестве выбираемого (<strong>target</strong>) и слой <em>Artesian</em> в качестве выбирающего (<strong>source</strong>). Отметьте галочкой пункт <strong>Use Selected Features</strong> — это позволит выбирать с использованием уже выбранных объектов.</p></li>
<li><p>Выберите метод выборки <em>intersect the source layer feature</em> — пересечение.</p></li>
<li>
<p>Нажмите <strong>Apply</strong>. Будут выбраны реки, пересекающие выбранный артезианский бассейн (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-int">6.10</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-int"></span>
<img src="images/Ex06/image16.png" alt="Пространственная выборка по правилу пересечения (intersect)" width="100%"><p class="caption">
Рис. 6.10: Пространственная выборка по правилу пересечения (intersect)
</p>
</div>
</li>
<li><p>Выберите метод выборки <em>are completely within the source layer feature</em> (полностью внутри).</p></li>
<li>
<p>Нажмите <strong>Apply</strong>. Будут выбраны реки, находящиеся полностью внутри выбранного бассейна (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-wit">6.11</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-wit"></span>
<img src="images/Ex06/image17.png" alt="Пространственная выборка по правилу нахождения внутри (completely within)" width="100%"><p class="caption">
Рис. 6.11: Пространственная выборка по правилу нахождения внутри (completely within)
</p>
</div>
</li>
<li>
<p>Очистите выборку с помощью инструмента <strong>Clear Selected Features</strong> (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-clr">6.12</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-clr"></span>
<img src="images/Ex06/image18.png" alt="Кнопка очищения текущей выборки" width="40%"><p class="caption">
Рис. 6.12: Кнопка очищения текущей выборки
</p>
</div>
</li>
</ol>
</div>
<div id="map-ref-hydrogeologic-overlay" class="section level2" number="6.7">
<h2>
<span class="header-section-number">6.7</span> Оверлей (дополнительно)<a class="anchor" aria-label="anchor" href="#map-ref-hydrogeologic-overlay"><i class="fas fa-link"></i></a>
</h2>
<p><a href="map-ref-hydrogeologic.html#map-ref-hydrogeologic">В начало упражнения ⇡</a></p>
<p><strong>Оверлей</strong> (от англ. <em>overlay</em> — наложение), в отличие от пространственного запроса, создает новые данные путем геометрической композиции входных слоев. Полученные участки наследуют атрибуты от каждого слоя. Эта операция базируется на стандартных отношениях множеств, таких как пересечение, объединение и симметрическая разность. Оверлей позволяет понять, какие комбинации объектов встречаются в пространстве. Так, если в качестве аргументов служат реки и бассейны, то в результате выполнения оверлея реки будут разрезаны на участки в соответствии с границами бассейнов.</p>
<p>Для выполнения оверлея вы будете использовать инструменты <strong>геообработки</strong>.</p>
<blockquote>
<p><strong>Геообработка (geoprocessing)</strong> в терминологии ArcGIS — это анализ и преобразование пространственных данных. Инструменты геообработки находятся в Арктулбоксе (ArcToolbox), где они сгруппированы по назначению. Некоторые наборы инструментов, такие как Spatial Analyst и 3D Analyst, с которыми вы познакомитесь на следующих занятиях, являются дополнительными модулями ArcGIS.</p>
</blockquote>
<p>С помощью оверлея можно разбить речную сеть на сегменты, принадлежащие разным бассейнам, а полученным сегментам автоматически присвоить название бассейна.</p>
<ol style="list-style-type: decimal">
<li><p>Щелкните по базе данных <em>Don.gdb</em> правой кнопкой мыши и выберите пункт <strong>Make Default Geodatabase</strong>. Эта команда указывает системе, что все результаты обработки данных (новые слои) следует помещать в выбранную базу геоданных.</p></li>
<li><p>Откройте <strong>ArcToolbox</strong> с помощью кнопки <img src="images/Ex06/image19.png"> на главной панели инструментов.</p></li>
<li><p>Раскройте группу инструментов <strong>Analysis Tools &gt; Overlay</strong>. Здесь можно найти различные режимы оверлея.</p></li>
<li><p>Запустите инструмент <strong>Identity</strong>, который находит геометрическое пересечение двух слоев и присваивает атрибуты второго слоя участкам первого слоя.</p></li>
<li>
<p>Заполните его параметры следующим образом:</p>
<table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Input features</em></td>
<td>Rivers</td>
</tr>
<tr class="even">
<td align="left"><em>Identity Features</em></td>
<td>Artesian</td>
</tr>
<tr class="odd">
<td align="left"><em>Output Feature Class</em></td>
<td><code>&lt;Ваша папка&gt;\Ex06\Don.gdb\Rivers_Identity</code></td>
</tr>
<tr class="even">
<td align="left"><em>JoinAttributes</em></td>
<td>ALL</td>
</tr>
</tbody>
</table>
<p>Диалог инструмента примет следующий вид (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-ide">6.13</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-ide"></span>
<img src="images/Ex06/image20.png" alt="Параметры инструмента оверлея методом Identity" width="80%"><p class="caption">
Рис. 6.13: Параметры инструмента оверлея методом Identity
</p>
</div>
</li>
</ol>
<p>После выполнения инструмента слой будет добавлен на карту. Раскройте его таблицу атрибутов, чтобы убедиться, что каждому участку реки присвоена принадлежность к артезианскому бассейну — часть строк будет пустой, так как созданный вами слой артезианских бассейнов покрывает не всю территорию (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-ida">6.14</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-ida"></span>
<img src="images/Ex06/image21.png" alt="Атрибутивная таблица слоя рек с идентификацией принадлежности участков к артезианским бассейнам" width="100%"><p class="caption">
Рис. 6.14: Атрибутивная таблица слоя рек с идентификацией принадлежности участков к артезианским бассейнам
</p>
</div>
</div>
<div id="map-ref-hydrogeologic-attributes" class="section level2" number="6.8">
<h2>
<span class="header-section-number">6.8</span> Атрибутивный запрос (дополнительно)<a class="anchor" aria-label="anchor" href="#map-ref-hydrogeologic-attributes"><i class="fas fa-link"></i></a>
</h2>
<p><a href="map-ref-hydrogeologic.html#map-ref-hydrogeologic">В начало упражнения ⇡</a></p>
<p>Атрибутивный запрос позволяет искать объекты по значениям их атрибутов. В результате выполнения оверлея вы можете найти участки рек, принадлежащие артезианским бассейнам, по информации, содержащейся в поле <em>Basin</em>.</p>
<ol style="list-style-type: decimal">
<li><p>Откройте диалог атрибутивной выборки (меню <strong>Selection &gt; Select by Attributes</strong>).</p></li>
<li><p>Выберите в качестве выбираемого слой <em>Rivers_Identity</em>.</p></li>
<li>
<p>Введите следующий текст запроса:</p>
<p><code>"Basin" = 'Приволжско-Хоперский'</code></p>
</li>
<li><p>На карте будут выделены водотоки, принадлежащие данному артезианскому бассейну. Обратите внимание на то, что выборка теперь полностью совпадает с границами бассейна.</p></li>
<li>
<p>Откройте таблицу атрибутов слоя <em>Rivers_Identity</em> и укажите опцию <strong>Show Selected records</strong>, чтобы показывать только выбранные объекты (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-shw">6.15</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-shw"></span>
<img src="images/Ex06/image22.png" alt="Кнопка переключения в режим отображения в таблице только выбранных объектов" width="30%"><p class="caption">
Рис. 6.15: Кнопка переключения в режим отображения в таблице только выбранных объектов
</p>
</div>
</li>
<li>
<p>Скомпонуйте окна приложения таким образом, чтобы было видно одновременно окно атрибутивного запроса, таблицу атрибутов слоя со столбцом <em>Basin</em>, а также картографическое изображение с выделенными реками. Окно приложения примет следующий вид (Рис. <a href="map-ref-hydrogeologic.html#fig:mrh-sat">6.16</a>):</p>
<div class="figure">
<span style="display:block;" id="fig:mrh-sat"></span>
<img src="images/Ex06/image23.png" alt="Выборка участков рек по атрибуту принадлежности артезианскому бассейну" width="100%"><p class="caption">
Рис. 6.16: Выборка участков рек по атрибуту принадлежности артезианскому бассейну
</p>
</div>
</li>
<li><p>Сохраните документ карты.</p></li>
</ol>
</div>
<div id="map-ref-hydrogeologic-questions" class="section level2" number="6.9">
<h2>
<span class="header-section-number">6.9</span> Контрольные вопросы<a class="anchor" aria-label="anchor" href="#map-ref-hydrogeologic-questions"><i class="fas fa-link"></i></a>
</h2>
<p><a href="map-ref-hydrogeologic.html#map-ref-hydrogeologic">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>В какой последовательности расставляются контрольные точки при привязке данных? Каково их оптимальное расположение?</p></li>
<li><p>Какой метод трансформирования изображения вы использовали в работе? В чем его суть?</p></li>
<li><p>Как пристыковать один полигон к другому, не обводя их общую границу? Опишите последовательность действий.</p></li>
<li><p>Что позволяют делать атрибутивная и пространственная выборки? (<em>дополнительно</em>)</p></li>
<li><p>В чем суть операции оверлея слоев? Чем эта операция отличается от пространственной выборки? (<em>дополнительно</em>)</p></li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="map-ref-general.html"><span class="header-section-number">5</span> Привязка и векторизация (туристская карта)</a></div>
<div class="next"><a href="map-ref-economic.html"><span class="header-section-number">7</span> Привязка и векторизация (административная карта)</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#map-ref-hydrogeologic"><span class="header-section-number">6</span> Привязка и векторизация (гидрогеологическая карта)</a></li>
<li>
<a class="nav-link" href="#map-ref-hydrogeologic-intro"><span class="header-section-number">6.1</span> Введение</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#map-ref-hydrogeologic-control"><span class="header-section-number">6.1.1</span> Контрольный лист</a></li>
<li><a class="nav-link" href="#map-ref-hydrogeologic-annotation"><span class="header-section-number">6.1.2</span> Аннотация</a></li>
</ul>
</li>
<li><a class="nav-link" href="#map-ref-hydrogeologic-base"><span class="header-section-number">6.2</span> Оформление базовых слоев</a></li>
<li><a class="nav-link" href="#map-ref-hydrogeologic-referencing"><span class="header-section-number">6.3</span> Привязка растровой карты по контрольным точкам</a></li>
<li><a class="nav-link" href="#map-ref-hydrogeologic-regions"><span class="header-section-number">6.4</span> Векторизация слоя гидрогеологического районирования</a></li>
<li><a class="nav-link" href="#map-ref-hydrogeologic-design"><span class="header-section-number">6.5</span> Оформление карты</a></li>
<li><a class="nav-link" href="#map-ref-hydrogeologic-query"><span class="header-section-number">6.6</span> Пространственный запрос (дополнительно)</a></li>
<li><a class="nav-link" href="#map-ref-hydrogeologic-overlay"><span class="header-section-number">6.7</span> Оверлей (дополнительно)</a></li>
<li><a class="nav-link" href="#map-ref-hydrogeologic-attributes"><span class="header-section-number">6.8</span> Атрибутивный запрос (дополнительно)</a></li>
<li><a class="nav-link" href="#map-ref-hydrogeologic-questions"><span class="header-section-number">6.9</span> Контрольные вопросы</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Основы геоинформатики: практикум в ArcGIS</strong>" was written by Тимофей Самсонов. It was last built on 2022-08-24.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
