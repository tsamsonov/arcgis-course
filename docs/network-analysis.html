<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Упражнение 12 Транспортные сети | Основы геоинформатики: практикум в ArcGIS</title>
<meta name="author" content="Тимофей Самсонов">
<meta name="description" content="Скачать данные и файл отчета  12.1 Введение Цель — научиться решать различные задачи логистики и оптимизации размещения с помощью сетевого анализа. Параметр Значение Теоретическая подготовка...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Упражнение 12 Транспортные сети | Основы геоинформатики: практикум в ArcGIS">
<meta property="og:type" content="book">
<meta property="og:description" content="Скачать данные и файл отчета  12.1 Введение Цель — научиться решать различные задачи логистики и оптимизации размещения с помощью сетевого анализа. Параметр Значение Теоретическая подготовка...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Упражнение 12 Транспортные сети | Основы геоинформатики: практикум в ArcGIS">
<meta name="twitter:description" content="Скачать данные и файл отчета  12.1 Введение Цель — научиться решать различные задачи логистики и оптимизации размещения с помощью сетевого анализа. Параметр Значение Теоретическая подготовка...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="default">
<link rel="stylesheet" href="custom.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Основы геоинформатики: практикум в ArcGIS</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Введение</a></li>
<li class="book-part">Визуализация данных</li>
<li><a class="" href="map-design-quaternary.html"><span class="header-section-number">1</span> Карта четвертичных отложений</a></li>
<li><a class="" href="map-design-general.html"><span class="header-section-number">2</span> Общегеографическая карта</a></li>
<li><a class="" href="map-design-climates.html"><span class="header-section-number">3</span> Климатическая карта</a></li>
<li><a class="" href="map-design-economic.html"><span class="header-section-number">4</span> Социально-экономическая карта</a></li>
<li class="book-part">Базовые технологии ГИС</li>
<li><a class="" href="map-ref-general.html"><span class="header-section-number">5</span> Привязка и векторизация (туристская карта)</a></li>
<li><a class="" href="map-ref-hydrogeologic.html"><span class="header-section-number">6</span> Привязка и векторизация (гидрогеологическая карта)</a></li>
<li><a class="" href="map-ref-economic.html"><span class="header-section-number">7</span> Привязка и векторизация (административная карта)</a></li>
<li><a class="" href="stat-map-economic.html"><span class="header-section-number">8</span> Соединение табличных данных</a></li>
<li><a class="" href="geocoding.html"><span class="header-section-number">9</span> Адресное геокодирование</a></li>
<li class="book-part">Векторный анализ</li>
<li><a class="" href="overlay.html"><span class="header-section-number">10</span> Пространственные взаимосвязи</a></li>
<li><a class="" href="land-cover-hydro.html"><span class="header-section-number">11</span> Пространственные соотношения</a></li>
<li><a class="active" href="network-analysis.html"><span class="header-section-number">12</span> Транспортные сети</a></li>
<li><a class="" href="network-hydro.html"><span class="header-section-number">13</span> Гидрографические сети</a></li>
<li class="book-part">Растровый анализ</li>
<li><a class="" href="weighted-overlay.html"><span class="header-section-number">14</span> Оптимизация местоположения</a></li>
<li><a class="" href="dem.html"><span class="header-section-number">15</span> Цифровое моделирование рельефа</a></li>
<li class="book-part">Пространственное моделирование</li>
<li><a class="" href="density-analysis.html"><span class="header-section-number">16</span> Оценка плотности распределения</a></li>
<li><a class="" href="interpolation.html"><span class="header-section-number">17</span> Пространственная интерполяция</a></li>
<li><a class="" href="threed-modelling.html"><span class="header-section-number">18</span> Трехмерное моделирование</a></li>
<li class="book-part">Описание функций</li>
<li><a class="" href="manual-catalog.html"><span class="header-section-number">A</span> Работа с окном каталога</a></li>
<li><a class="" href="manual-toolbox.html"><span class="header-section-number">B</span> Геообработка</a></li>
<li><a class="" href="manual-gdb.html"><span class="header-section-number">C</span> База геоданных</a></li>
<li><a class="" href="manual-toc.html"><span class="header-section-number">D</span> Работа с таблицей слоев</a></li>
<li><a class="" href="manual-toolbar.html"><span class="header-section-number">E</span> Панели инструментов</a></li>
<li><a class="" href="manual-navigation.html"><span class="header-section-number">F</span> Навигация по карте</a></li>
<li><a class="" href="manual-vector.html"><span class="header-section-number">G</span> Оформление векторного слоя</a></li>
<li><a class="" href="manual-raster.html"><span class="header-section-number">H</span> Оформление растрового слоя</a></li>
<li><a class="" href="manual-labels.html"><span class="header-section-number">I</span> Подписи объектов</a></li>
<li><a class="" href="manual-attributes.html"><span class="header-section-number">J</span> Атрибутивная таблица</a></li>
<li><a class="" href="manual-select.html"><span class="header-section-number">K</span> Выборка объектов</a></li>
<li><a class="" href="manual-projections.html"><span class="header-section-number">L</span> Проекции и координатная сетка</a></li>
<li><a class="" href="manual-georef.html"><span class="header-section-number">M</span> Привязка растровых данных</a></li>
<li><a class="" href="manual-edit.html"><span class="header-section-number">N</span> Редактирование</a></li>
<li><a class="" href="manual-layout.html"><span class="header-section-number">O</span> Компоновка карт</a></li>
<li><a class="" href="manual-legend.html"><span class="header-section-number">P</span> Легенда карты</a></li>
<li><a class="" href="manual-export.html"><span class="header-section-number">Q</span> Экспорт изображения</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="network-analysis" class="section level1" number="12">
<h1>
<span class="header-section-number">Упражнение 12</span> Транспортные сети<a class="anchor" aria-label="anchor" href="#network-analysis"><i class="fas fa-link"></i></a>
</h1>
<p><a href="http://autolab.geogr.msu.ru/gis/data/Ex12.zip">Скачать данные и файл отчета</a></p>
<div id="network-analysis-intro" class="section level2" number="12.1">
<h2>
<span class="header-section-number">12.1</span> Введение<a class="anchor" aria-label="anchor" href="#network-analysis-intro"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Цель</strong> — научиться решать различные задачи логистики и оптимизации размещения с помощью сетевого анализа.</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Теоретическая подготовка</em></td>
<td>Понятие о сетевой модели данных, граф дорожной сети, сетевой анализ и его основные задачи: кратчайший маршрут, зона обслуживания, ближайший пункт обслуживания, размещение-распределение, управление парком транспортных средств.</td>
</tr>
<tr class="even">
<td align="left"><em>Практическая подготовка</em></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Инструмент геообработки. Настройка символики и подписей объектов. Выделение объектов на карте. Пространственные и атрибутивные запросы. Оверлей. Инструменты ArcToolbox.</td>
</tr>
<tr class="odd">
<td align="left"><em>Исходные данные</em></td>
<td>Cлои картографической основы OpenStreetMap, граф дорожной сети на основе данных OpenStreetMap на территорию Москвы.</td>
</tr>
<tr class="even">
<td align="left"><em>Результат</em></td>
<td>Маршрут до магазина. Зоны обслуживания магазина от 1 до 5 минут. Маршруты до ближайших магазинов. Результат размещения магазинов. Зонирование территории по принадлежности к магазинам. Проект карты зонирования с компоновкой</td>
</tr>
<tr class="odd">
<td align="left"><em>Ключевые слова</em></td>
<td>Сетевой анализ, граф дорожной сети, оптимизация размещения, логистика.</td>
</tr>
</tbody>
</table></div>
<div id="network-analysis-control" class="section level3" number="12.1.1">
<h3>
<span class="header-section-number">12.1.1</span> Контрольный лист<a class="anchor" aria-label="anchor" href="#network-analysis-control"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Добавить на карту, слой улиц и слой зданий, граф дорожной сети</li>
<li>Поставить точку магазина и точку потребителя, построить маршрут</li>
<li>Поставить барьер на маршруте и перестроить маршрут с учетом барьера</li>
<li>Рассчитать зоны обслуживания магазина от 1 до 5 минут движения на автомобиле</li>
<li>Поставить еще одну точку магазина и 5 точек потребителя, рассчитать маршруты до ближайшего магазина</li>
<li>Добавить на карту точки потребителей, расставить 7 точек потенциальных магазинов, выполнить анализ с выбором 4 мест из потенциальных</li>
<li>Выполнить районирование территории по зонам обслуживания магазинов.</li>
<li>Оформить карту с основными элементами компоновки (легенда, масштаб и т.д.)</li>
</ul>
</div>
<div id="network-analysis-annotation" class="section level3" number="12.1.2">
<h3>
<span class="header-section-number">12.1.2</span> Аннотация<a class="anchor" aria-label="anchor" href="#network-analysis-annotation"><i class="fas fa-link"></i></a>
</h3>
<p>Задание посвящено знакомству с сетевым анализом. Задачи, предлагаемые в задании, связаны с определением оптимальных маршрутов, построением зон обслуживания, определением ближайших сервисных точек, размещением сервисных точек. Данные задачи активно используются в логистике — оптимизации перевозок, а также в геомаркетинге и оптимизации местоположения пунктов обслуживания (магазинов, складов, пожарных депо и т.д.). В основе решения этих задач лежит сетевая модель данных, являющаяся частным случаем векторной модели. В сетевой модели дорожная сеть представляется в виде графа.</p>
</div>
</div>
<div id="network-analysis-basemap" class="section level2" number="12.2">
<h2>
<span class="header-section-number">12.2</span> Оформление базовых слоев<a class="anchor" aria-label="anchor" href="#network-analysis-basemap"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-analysis.html#network-analysis">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Подключитесь к базе геоданных <em>Ex12.gdb</em> в вашей папке <em>Ex12</em>.</p></li>
<li><p>Добавьте на карту слои <em>Buildings</em> (здания) и <em>Streets</em> (улицы).</p></li>
<li><p>Присвойте зданиям цвет серый (20%), уберите обводку (<strong>Outline Color &gt; No Color</strong>).</p></li>
<li><p>Установите масштаб равным 1:10 000 для удобной работы с картой.</p></li>
<li>
<p>Включите подписи зданий со следующими параметрами:</p>
<table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Поле подписи</em></td>
<td>A_HSNMBR</td>
</tr>
<tr class="even">
<td align="left"><em>Цвет подписи</em></td>
<td>Серый 80%</td>
</tr>
<tr class="odd">
<td align="left"><em>Размер подписи</em></td>
<td>6 пунктов</td>
</tr>
</tbody>
</table>
</li>
<li>
<p>Присвойте дорогам серый цвет (60%) и включите их подписи со следующими параметрами:</p>
<table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Поле подписи</em></td>
<td>Name (tag value)</td>
</tr>
<tr class="even">
<td align="left"><em>Цвет подписи</em></td>
<td>Черный</td>
</tr>
<tr class="odd">
<td align="left"><em>Размер подписи</em></td>
<td>8 пунктов</td>
</tr>
<tr class="even">
<td align="left"><em>Начертание</em></td>
<td>Жирное</td>
</tr>
</tbody>
</table>
</li>
<li><p>Добавьте на карту граф дорожной сети <em>OSM</em>, который находится в наборе данных <em>OSM_nd</em> базы геоданных <em>Ex12</em>. В появившемся диалоге скажите <em>No</em> (Нет), чтобы не добавлять на карту поворотные точки и прочие вспомогательные элементы графа.</p></li>
<li><p>Задайте линиям графа такой же символ как и дорогам.</p></li>
<li><p>Сохраните документ карты в свою директорию <em>Ex12</em> под названием <em>Ex12_Network.mxd</em>.</p></li>
</ol>
<p>Примерный результат должен выглядеть так:</p>
<div class="inline-figure"><img src="images/Ex12/image6.png"></div>
<p><kbd><strong>Снимок экрана №1</strong> — Базовые слои: улицы, здания, граф дорожной сети</kbd></p>
</div>
<div id="network-analysis-route" class="section level2" number="12.3">
<h2>
<span class="header-section-number">12.3</span> Построение маршрута<a class="anchor" aria-label="anchor" href="#network-analysis-route"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-analysis.html#network-analysis">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Включите модуль <strong>Network Analyst</strong> с помощью команды главного меню
<strong>Customize—Extensions</strong></p></li>
<li>
<p>Включите панель инструментов <strong>Network Analyst</strong>:</p>
<div class="inline-figure"><img src="images/Ex12/image7.png"></div>
<p>Если все правильно, в ниспадающем списке панели будет отображаться граф дорожной сети <em>OSM_nd</em></p>
</li>
<li>
<p>Создайте слой вычисления маршрутов с помощью команды <strong>Network Analyst &gt; New Route</strong>:</p>
<div class="inline-figure"><img src="images/Ex12/image8.png"></div>
</li>
<li>
<p>Откройте окно <strong>Network Analyst Window</strong>:</p>
<div class="inline-figure"><img src="images/Ex12/image9.png"></div>
</li>
</ol>
<p>Предположим, что по адресу ул. Профсоюзная, д.9 находится магазин. Вы проживаете по адресу ул. Шверника, д. 19. Необходимо построить прямой и обратный автомобильный маршрут.</p>
<ol style="list-style-type: decimal">
<li>
<p>Выделите в списке набор <strong>Stops</strong>, и, используя инструмент <strong>Create Network Location</strong>, поставьте на графе дорожной сети 2 точки:</p>
<ul>
<li>Рядом со зданием ул. Профсоюзная, д. 9</li>
<li>Рядом со зданием ул. Шверника, д. 19</li>
</ul>
<div class="inline-figure"><img src="images/Ex12/image10.png"></div>
</li>
<li>
<p>Нажмите <strong>Solve</strong>, чтобы построить прямой маршрут:</p>
<div class="inline-figure"><img src="images/Ex12/image11.png"></div>
<p><kbd><strong>Снимок экрана №2.</strong> Прямой маршрут</kbd></p>
</li>
<li>
<p>Поменяйте точки местами в окне <strong>Network Analyst</strong> чтобы построить обратный маршрут. Для этого перетащите нижнюю точку вверх списка. Запустите еще раз <strong>Solve</strong>:</p>
<div class="inline-figure"><img src="images/Ex12/image12.png"></div>
<p><kbd> <strong>Снимок экрана №3.</strong> Обратный маршрут</kbd></p>
</li>
</ol>
<p>Допустим, по адресу проспект 60-летия Октября, д.29к1 ведутся ремонтные работы и движение перекрыто. Поставьте в этом месте барьер и перестройте маршрут. Для этого:</p>
<ol style="list-style-type: decimal">
<li><p>Выделите в окне <strong>Network Analyst</strong> пункт <strong>Point Barriers &gt; Restriction</strong> и поставьте точку на граф рядом со зданием проспект 60-летия Октября, д.29к1.</p></li>
<li>
<p>Перестройте маршрут:</p>
<div class="inline-figure"><img src="images/Ex12/image13.png"></div>
<p><kbd><strong>Снимок экрана №4</strong> Обратный маршрут с барьером</kbd></p>
</li>
<li><p>Сохраните документ карты.</p></li>
</ol>
</div>
<div id="network-analysis-servicearea" class="section level2" number="12.4">
<h2>
<span class="header-section-number">12.4</span> Определение зоны обслуживания<a class="anchor" aria-label="anchor" href="#network-analysis-servicearea"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-analysis.html#network-analysis">В начало упражнения ⇡</a></p>
<p>Необходимо определить, какие здания попадают в зону доступности магазина в пределах 1-5 минут движения на автомобиле.</p>
<ol style="list-style-type: decimal">
<li><p>Отключите в таблице содержания слой <strong>Route</strong> (снимите галочку).</p></li>
<li><p>Создайте слой вычисления зон обслуживания с помощью команды <strong>Network Analyst &gt; New Service Area</strong>.</p></li>
<li>
<p>Выделите в окне <strong>Network Analyst</strong> слой <em>Facilities</em> (пункты обслуживания) и используя тот же инструмент <strong>Create Network Location</strong>, поставьте точку по адресу ул. Профсоюзная, д. 2/22 (пересечение с ул. Дмитрия Ульянова).</p>
<div class="inline-figure"><img src="images/Ex12/image14.png"></div>
</li>
<li>
<p>Установите время езды до магазина равным 2 минуты. Для этого дважды щелкните на слое <em>Service Area</em> в таблице содержания, перейдите на вкладку <strong>Analysis Settings</strong> и поменяйте следующие настройки:</p>
<table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Default Breaks</em></td>
<td>2</td>
</tr>
<tr class="even">
<td align="left"><em>Direction</em></td>
<td>Towards Facility</td>
</tr>
</tbody>
</table>
<blockquote>
<p>Режим <em>Towards Facility</em> означает, что движение будет моделироваться от потребителя к точке обслуживания</p>
</blockquote>
</li>
<li>
<p>Нажмите <strong>Solve</strong> на панели <strong>Network Analyst</strong>, чтобы построить зону обслуживания:</p>
<div class="inline-figure"><img src="images/Ex12/image15.png"></div>
<p><kbd><strong>Снимок экрана №5</strong>. Зона обслуживания 2 мин</kbd></p>
</li>
<li>
<p>Постройте иерархию зон обслуживания от 1 до 5 минут. Для этого поменяйте значение параметра <strong>Breaks</strong> в настройках слоя <em>Service Area</em> на <em>1 2 3 4 5</em> (через пробелы):</p>
<div class="inline-figure"><img src="images/Ex12/image16.png"></div>
</li>
<li>
<p>Перезапустите расчет зон обслуживания.</p>
<p>Примерный результат должен выглядеть следующим образом:</p>
<div class="inline-figure"><img src="images/Ex12/image17.png"></div>
<p><kbd><strong>Снимок экрана №6</strong> Иерархия зон обслуживания от 1 до 5 мин</kbd></p>
</li>
</ol>
<p>Получив зоны обслуживания, вы можете выделить с их помощью здания и провести экономико-географический анализ. Для этого можно воспользоваться пространственной выборкой.</p>
<ol style="list-style-type: decimal">
<li><p>Раскройте список <strong>Polygons</strong> в окне <strong>Network Analyst</strong>, чтобы увидеть легенду слоя. Выберите зону <em>Graphic Pick 1: 1 – 2</em>, она соответствует интервалу движения от 1 до 2 минут до магазина. Соответствующий полигон подсветится на карте.</p></li>
<li>
<p>Откройте диалог пространственной выборки (<strong>Selection &gt; Select By Location</strong>). Задайте в качестве целевого слоя <em>(Target) Buildings</em>, а в качестве слоя-источника (<strong>Source</strong>) — <em>Polygons</em> из группы <strong>Service Area</strong>. Отметьте галочкой <strong>Use selected features</strong>, чтобы пространственный запрос осуществлялся выбранной зоной. Диалог пространственной выборки примет следующий вид:</p>
<div class="inline-figure"><img src="images/Ex12/image18.png"></div>
</li>
<li>
<p>Нажмите <strong>ОК</strong>. На карте будут отобраны здания, попадающие в заданный интервал транспортной доступности:</p>
<div class="inline-figure"><img src="images/Ex12/image19.png"></div>
<p><kbd><strong>Снимок экрана №7.</strong> Выборка зданий</kbd></p>
<p>Полученную выборку зданий вы можете далее использовать для проведения статистического и географического анализа.</p>
</li>
<li><p>Сохраните документ карты</p></li>
</ol>
</div>
<div id="network-analysis-facility" class="section level2" number="12.5">
<h2>
<span class="header-section-number">12.5</span> Определение ближайшего пункта обслуживания<a class="anchor" aria-label="anchor" href="#network-analysis-facility"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-analysis.html#network-analysis">В начало упражнения ⇡</a></p>
<p>Предположим, что есть 2 магазина и 5 семей, которые живут в разных районах. Необходимо определить, какой магазин является ближайшим для каждой семьи и построить маршрут.</p>
<ol style="list-style-type: decimal">
<li><p>Отключите слой <em>Service Area</em> в таблице содержания и снимите выборку со всех объектов.</p></li>
<li><p>Создайте слой определения ближайшего пункта обслуживания с помощью команды <strong>Network Analyst &gt; New Closest Facility</strong>.</p></li>
<li>
<p>Используя навыки предыдущего анализа, поставьте два пункта обслуживания (<em>Facilities</em>) по адресам:</p>
<ul>
<li>Ул. Вавилова д. 48</li>
<li>Ул. Новочеремушкинская, д. 23</li>
</ul>
</li>
<li>
<p>Поставьте 5 пунктов потребления (<em>Incidents</em>) по адресам:</p>
<ul>
<li><p>Ул Шверника, д. 19</p></li>
<li><p>Ленинский проспект, д. 44</p></li>
<li><p>Нахимовский проспект, д. 67</p></li>
<li><p>Проспект 60-летия Октября, д. 19</p></li>
<li><p>Ул. Кржижановского, д. 16к1</p></li>
</ul>
</li>
<li><p>Нажмите <strong>Solve</strong>, чтобы запустить расчет маршрутов.</p></li>
</ol>
<p>Инструмент выберет ближайшие пункты обслуживания (магазины) для каждого потребителя и построит маршруты:</p>
<div class="inline-figure"><img src="images/Ex12/image20.png"></div>
<p><kbd> <strong>Снимок экрана №8</strong>. Ближайшие пункты обслуживания</kbd></p>
</div>
<div id="network-analysis-allocation" class="section level2" number="12.6">
<h2>
<span class="header-section-number">12.6</span> Размещение—распределение<a class="anchor" aria-label="anchor" href="#network-analysis-allocation"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-analysis.html#network-analysis">В начало упражнения ⇡</a></p>
<p>Задача размещения—распределения (location-allocation) звучит следующим образом: есть <em>N</em> потенциальных точек для размещения пунктов обслуживания (магазины, кафе, пожарные станции, транспортные узлы, сервисные центры и т.д.), а также <em>K</em> точек потребления (обычно это здания, из которых выезжают люди за услугами, или к которым эти услуги поставляются). Необходимо из <em>N</em> точек обслуживания выбрать <em>n</em> ≤ <em>N</em> точек таким образом, чтобы минимизировать некую стоимостную функцию (например, суммарное время движения от каждого пункта потребления до ближайшего пункта обслуживания). После чего распределить точки по ближайшим пунктам обслуживания. Данный тип анализа позволяет также моделировать противостояние конкурирующих сетей обслуживания и подбирать оптимальные места размещения пунктов для максимального охвата рынка.</p>
<ol style="list-style-type: decimal">
<li><p>Отключите слой Closest Facility в таблице содержания</p></li>
<li><p>Создайте слой размещения—распределения с помощью команды <strong>Network Analyst &gt; New Location-Allocation</strong>.</p></li>
<li>
<p>Расставьте потенциальные пункты обслуживания (<em>Facilities</em>) по
следующим адресам:</p>
<ul>
<li><p>Ул. Большая Черемушкинская, д.11к3</p></li>
<li><p>Ул. Дмитрия Ульянова, д. 42</p></li>
<li><p>Ул. Профсоюзная, д. 19</p></li>
<li><p>Ленинский проспект, д. 67</p></li>
<li><p>Ленинский проспект, д. 44</p></li>
<li><p>Проспект 60-летия Октября, д. 19к1</p></li>
<li><p>Ул. Дмитрия Ульянова, 26к1</p></li>
</ul>
</li>
<li><p>Добавьте на карту слой <em>Points</em> из базы геоданных <em>Ex12</em>. Это слой центроидов зданий, необходимый для загрузки точек потребления.</p></li>
<li>
<p>Сделайте точки черного цвета диаметром 3 пункта</p>
<p>Изображение примет следующий вид:</p>
<div class="inline-figure"><img src="images/Ex12/image21.png"></div>
</li>
<li>
<p>Загрузите точки в пункты потребления. Для этого щелкните правой кнопкой мыши на строке <em>Demand Points</em> окна <strong>Network Analyst</strong> и выберите команду <strong>Load Locations</strong>:</p>
<div class="inline-figure"><img src="images/Ex12/image22.png"></div>
</li>
<li>
<p>В появившемся диалоге выберите в списке <strong>Load From</strong> слой <em>Points</em> и нажмите <em>ОК</em>. Потребуется некоторое время, чтобы точки привязались к графу дорожной сети. За процессом вы можете следить в строке состояния приложения (внизу).</p>
<div class="inline-figure"><img src="images/Ex12/image23.png"></div>
</li>
<li>
<p>Дважды щелкните на слое <em>Location-Allocation</em> в таблице содержания, чтобы изменить настройки анализа. Перейдите на вкладку <strong>Advanced Settings</strong>:</p>
<div class="inline-figure"><img src="images/Ex12/image24.png"></div>
</li>
<li><p>Попробуйте выбрать различные варианты решения задачи в списке <strong>Problem Type</strong> и прочитайте их описание. Подумайте, где можно применить такой анализ.</p></li>
<li><p>Выберите режим <em>Minimize Impedance</em> (минимизировать суммарное время движения от потребителей к ближайшим пунктам обслуживания).</p></li>
<li>
<p>Установите количество отбираемых кандидатов (<strong>Facilities to Choose</strong>) равное <em>4</em>.</p>
<div class="inline-figure"><img src="images/Ex12/image25.png"></div>
</li>
<li>
<p>Установите направление движения <em>Demand to Facility</em> (потребитель к услугам) на вкладке <strong>Analysis Settings</strong>:</p>
<div class="inline-figure"><img src="images/Ex12/image26.png"></div>
</li>
<li>
<p>Нажмите <strong>ОК</strong> и запустите решение задачи на панели <strong>Network Analyst</strong>. Будут выбраны 4 наиболее оптимальных пункта обслуживания, а здания будут распределены между ними в виде веерной диаграммы. Программа выдаст предупреждение, что некоторые точки оказались непривязанными — проигнорируйте его. Это связано с тем, что некоторые здания по краям области транспортно недоступны, поскольку к ним требуется подъезд извне изучаемого района. Вы можете их видеть по отсутствию исходящих линий.</p>
<div class="inline-figure"><img src="images/Ex12/image27.png"></div>
<p><kbd><strong>Снимок экрана №9.</strong> Результат размещения—распределения</kbd></p>
</li>
<li><p>Сохраните документ карты</p></li>
</ol>
</div>
<div id="network-analysis-zoning" class="section level2" number="12.7">
<h2>
<span class="header-section-number">12.7</span> Районирование города по зонам обслуживания<a class="anchor" aria-label="anchor" href="#network-analysis-zoning"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-analysis.html#network-analysis">В начало упражнения ⇡</a></p>
<p>На основе полученного распределения можно произвести районирования территории. Для этого вы построите диаграмму Вороного точек потребления и объедините полигоны, отнесенные к одному пункту обслуживания.</p>
<ol style="list-style-type: decimal">
<li><p>Исключите нераспределенные точки. Для этого дважды щелкните на слое <em>Demand Points</em> в таблице содержания, перейдите на вкладку <strong>Definition Query</strong>, нажмите <strong>Query Builder</strong> и введите следующий запрос:
<code>"FacilityID" IS NOT NULL</code>
<img src="images/Ex12/image28.png"></p></li>
<li>
<p>Создайте в вашем каталоге <em>Ex12</em> базу геоданных <em>Regions.gdb</em> и назначьте ее базой данных по умолчанию:</p>
<div class="inline-figure"><img src="images/Ex12/image29.png"></div>
</li>
<li><p>Откройте <strong>ArcToolbox</strong>.</p></li>
<li>
<p>Запустите инструмент геообработки <strong>Analysis Tools &gt; Proximity &gt; Create Thiessen Polygons</strong> и заполните его параметры следующим образом:</p>
<table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Input Features</em></td>
<td><code>Location-Allocation\Demand Points</code></td>
</tr>
<tr class="even">
<td align="left"><em>Output Features</em></td>
<td><code>…\Ex12\Regions.gdb\DemandPoints_Voronoy</code></td>
</tr>
<tr class="odd">
<td align="left"><em>Output Fields</em></td>
<td><code>ALL</code></td>
</tr>
</tbody>
</table>
<p>Запустите инструмент. Полученный слой будет добавлен на карту и будет иметь следующую структуру:</p>
<div class="inline-figure"><img src="images/Ex12/image30.png"></div>
</li>
</ol>
<blockquote>
<p><em>Диаграмма Вороного</em> обладает следующим свойством: какую бы точку мы не взяли внутри каждого полигона, она будет ближе к центроиду этого полигона, чем к любому другому центроиду.</p>
</blockquote>
<p>Объединив полигоны Вороного, точки которых отнесены к одному и тому же пункту обслуживания, вы получите районирование территории по зонам обслуживания. Для этого:</p>
<ol style="list-style-type: decimal">
<li>
<p>Запустите инструмент <strong>Data Management Tools &gt; Generalization &gt; Dissolve</strong> и заполните его параметры следующим образом:</p>
<table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Input Features</em></td>
<td><code>DemandPoints_Voronoy</code></td>
</tr>
<tr class="even">
<td align="left"><em>Output Feature Class</em></td>
<td><code>…\Ex12\Regions.gdb\Regions</code></td>
</tr>
<tr class="odd">
<td align="left"><em>Dissolve Field(s)</em></td>
<td>FacilityID</td>
</tr>
</tbody>
</table>
<p>Остальные параметры оставьте по умолчанию. Диалог инструмента примет следующий вид:</p>
<div class="inline-figure"><img src="images/Ex12/image31.png"></div>
</li>
<li><p>Нажмите <strong>ОК</strong>. После обработки слой районирования будет добавлен на карту.</p></li>
<li><p>Отключите слои диаграммы Вороного, а также точек зданий.</p></li>
<li><p>Переместите слой Regions под слои зданий и дорог.</p></li>
<li>
<p>Измените оформление слоя Regions следующим образом:</p>
<ul>
<li><p>Способ изображения <strong>Categories &gt; Unique Values</strong></p></li>
<li><p>Поле отображения <em>Facility ID</em></p></li>
<li><p>Цвета отображения спокойные, пастельные, одинаковые по насыщенности.</p></li>
<li><p>Обводка полигонов отсутствует. Чтобы убрать обводку сразу у всех плашек, щелкните на заголовке столбца <strong>Symbol</strong>, выберите пункт <strong>Properties for All Symbols</strong> и установите параметр <strong>Outline Color</strong> в положение <strong>No Color</strong>.</p></li>
</ul>
<p>Примерный вид диалога свойств слоя <em>Regions</em> выглядит следующим образом:</p>
<div class="inline-figure"><img src="images/Ex12/image32.png"></div>
</li>
<li><p>Нажмите <strong>ОК</strong>, чтобы завершить оформление</p></li>
<li><p>В группе <em>Location-Allocation</em> оставьте включенным только слой <em>Facilities</em>.</p></li>
<li>
<p>Выгрузите отобранные пункты в отдельный слой. Для этого в окне <strong>Network Analyst</strong> выделите в списке <em>Facilities</em> пункты, помеченные звездочками (зажав клавишу <kbd>Ctrl</kbd>). Далее в контекстном меню слоя <em>Facilities</em> выберите команду <strong>Export Data</strong>.</p>
<div class="inline-figure"><img src="images/Ex12/image33.png"></div>
</li>
<li>
<p>Сохраните выборку в базу геоданных <em>Regions.gdb</em> под названием
<em>Selected</em>:</p>
<div class="inline-figure"><img src="images/Ex12/image34.png"></div>
</li>
<li><p>На вопрос добавить ли созданный слой на карту, ответьте утвердительно. Переименуйте слой в «<em>Пункты обслуживания</em>». Визуализируйте слой методом категорий (<strong>Categories — Unique Values</strong>) по полю <em>Name</em>. В качестве символа используйте кружки диаметром 16 пунктов. Цвет кружков приведите в соответствии с цветом зоны, но сделайте его более ярким и насыщенным.</p></li>
<li><p>Проделайте аналогичную операцию для не выбранных пунктов обслуживания, выделив их в списке. Сохраните их в базу геоданных под названием Rejected. Полученный слой на карте назовите «<em>Не выбранные пункты обслуживания</em>» Присвойте полученному слою единый символ в виде темно-серого кружка диаметром 12 пунктов.</p></li>
<li><p>Включите подписи номеров районов по полю <em>FacilityID</em> (размер шрифта 18)</p></li>
<li><p>Отключите слой <em>Location-Allocation</em> целиком.</p></li>
</ol>
<p>Ваш проект примет следующий вид:</p>
<div class="inline-figure"><img src="images/Ex12/image35.png"></div>
<p><kbd><strong>Снимок экрана №10.</strong> Районирование территории</kbd></p>
</div>
<div id="network-analysis-layout" class="section level2" number="12.8">
<h2>
<span class="header-section-number">12.8</span> Компоновка карты<a class="anchor" aria-label="anchor" href="#network-analysis-layout"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-analysis.html#network-analysis">В начало упражнения ⇡</a></p>
<p>Оформите карту в режиме компоновки в соответствии с нижеприведенным образцом. Экспортируйте результат в графический файл и вставьте его в отчет.</p>
<div class="inline-figure"><img src="images/Ex12/image36.png"></div>
</div>
<div id="network-analysis-questions" class="section level2" number="12.9">
<h2>
<span class="header-section-number">12.9</span> Контрольные вопросы<a class="anchor" aria-label="anchor" href="#network-analysis-questions"><i class="fas fa-link"></i></a>
</h2>
<p><a href="network-analysis.html#network-analysis">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Какой слой необходим для проведения сетевого анализа?</p></li>
<li><p>Какую задачу позволяет решить инструмент <em>Route</em>?</p></li>
<li><p>Какую задачу позволяет решить инструмент <em>Service Area</em>?</p></li>
<li><p>Можно ли построить сразу несколько зон обслуживания? Как это сделать?</p></li>
<li><p>Какую задачу позволяет решить инструмент <em>Closest Facility</em>?</p></li>
<li><p>Какую задачу позволяет решить инструмент <em>Location-Allocation</em>?</p></li>
<li><p>Какая последовательность действий позволяет перейти от распределений точек к площадному районированию территории?</p></li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="land-cover-hydro.html"><span class="header-section-number">11</span> Пространственные соотношения</a></div>
<div class="next"><a href="network-hydro.html"><span class="header-section-number">13</span> Гидрографические сети</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#network-analysis"><span class="header-section-number">12</span> Транспортные сети</a></li>
<li>
<a class="nav-link" href="#network-analysis-intro"><span class="header-section-number">12.1</span> Введение</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#network-analysis-control"><span class="header-section-number">12.1.1</span> Контрольный лист</a></li>
<li><a class="nav-link" href="#network-analysis-annotation"><span class="header-section-number">12.1.2</span> Аннотация</a></li>
</ul>
</li>
<li><a class="nav-link" href="#network-analysis-basemap"><span class="header-section-number">12.2</span> Оформление базовых слоев</a></li>
<li><a class="nav-link" href="#network-analysis-route"><span class="header-section-number">12.3</span> Построение маршрута</a></li>
<li><a class="nav-link" href="#network-analysis-servicearea"><span class="header-section-number">12.4</span> Определение зоны обслуживания</a></li>
<li><a class="nav-link" href="#network-analysis-facility"><span class="header-section-number">12.5</span> Определение ближайшего пункта обслуживания</a></li>
<li><a class="nav-link" href="#network-analysis-allocation"><span class="header-section-number">12.6</span> Размещение—распределение</a></li>
<li><a class="nav-link" href="#network-analysis-zoning"><span class="header-section-number">12.7</span> Районирование города по зонам обслуживания</a></li>
<li><a class="nav-link" href="#network-analysis-layout"><span class="header-section-number">12.8</span> Компоновка карты</a></li>
<li><a class="nav-link" href="#network-analysis-questions"><span class="header-section-number">12.9</span> Контрольные вопросы</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Основы геоинформатики: практикум в ArcGIS</strong>" was written by Тимофей Самсонов. It was last built on 2023-01-04.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
