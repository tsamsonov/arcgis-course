<!DOCTYPE html>
<html lang="en">
<head>
<meta http-equiv="Content-Type" content="text/html; charset=UTF-8">
<meta charset="utf-8">
<meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<title>Упражнение 14 Оптимизация местоположения | Основы геоинформатики: практикум в ArcGIS</title>
<meta name="author" content="Тимофей Самсонов">
<meta name="description" content="Скачать данные и файл отчета  14.1 Введение Цель — овладеть основами растрового анализа в ГИС на примере решения задачи поиска оптимального местоположения для размещения объектов. Параметр...">
<meta name="generator" content="bookdown 0.30 with bs4_book()">
<meta property="og:title" content="Упражнение 14 Оптимизация местоположения | Основы геоинформатики: практикум в ArcGIS">
<meta property="og:type" content="book">
<meta property="og:description" content="Скачать данные и файл отчета  14.1 Введение Цель — овладеть основами растрового анализа в ГИС на примере решения задачи поиска оптимального местоположения для размещения объектов. Параметр...">
<meta name="twitter:card" content="summary">
<meta name="twitter:title" content="Упражнение 14 Оптимизация местоположения | Основы геоинформатики: практикум в ArcGIS">
<meta name="twitter:description" content="Скачать данные и файл отчета  14.1 Введение Цель — овладеть основами растрового анализа в ГИС на примере решения задачи поиска оптимального местоположения для размещения объектов. Параметр...">
<!-- JS --><script src="https://cdnjs.cloudflare.com/ajax/libs/clipboard.js/2.0.6/clipboard.min.js" integrity="sha256-inc5kl9MA1hkeYUt+EC3BhlIgyp/2jDIyBLS6k3UxPI=" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/fuse.js/6.4.6/fuse.js" integrity="sha512-zv6Ywkjyktsohkbp9bb45V6tEMoWhzFzXis+LrMehmJZZSys19Yxf1dopHx7WzIKxr5tK2dVcYmaCk2uqdjF4A==" crossorigin="anonymous"></script><script src="https://kit.fontawesome.com/6ecbd6c532.js" crossorigin="anonymous"></script><script src="libs/jquery-3.6.0/jquery-3.6.0.min.js"></script><meta name="viewport" content="width=device-width, initial-scale=1, shrink-to-fit=no">
<link href="libs/bootstrap-4.6.0/bootstrap.min.css" rel="stylesheet">
<script src="libs/bootstrap-4.6.0/bootstrap.bundle.min.js"></script><script src="libs/bs3compat-0.4.1/transition.js"></script><script src="libs/bs3compat-0.4.1/tabs.js"></script><script src="libs/bs3compat-0.4.1/bs3compat.js"></script><link href="libs/bs4_book-1.0.0/bs4_book.css" rel="stylesheet">
<script src="libs/bs4_book-1.0.0/bs4_book.js"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/autocomplete.js/0.38.0/autocomplete.jquery.min.js" integrity="sha512-GU9ayf+66Xx2TmpxqJpliWbT5PiGYxpaG8rfnBEk1LL8l1KGkRShhngwdXK1UgqhAzWpZHSiYPc09/NwDQIGyg==" crossorigin="anonymous"></script><script src="https://cdnjs.cloudflare.com/ajax/libs/mark.js/8.11.1/mark.min.js" integrity="sha512-5CYOlHXGh6QpOFA/TeTylKLWfB3ftPsde7AnmhuitiTX4K5SqCLBeKro6sPS8ilsz1Q4NRx3v8Ko2IBiszzdww==" crossorigin="anonymous"></script><!-- CSS --><style type="text/css">
    
    div.hanging-indent{margin-left: 1.5em; text-indent: -1.5em;}
  </style>
<link rel="stylesheet" href="default">
<link rel="stylesheet" href="custom.css">
</head>
<body data-spy="scroll" data-target="#toc">

<div class="container-fluid">
<div class="row">
  <header class="col-sm-12 col-lg-3 sidebar sidebar-book"><a class="sr-only sr-only-focusable" href="#content">Skip to main content</a>

    <div class="d-flex align-items-start justify-content-between">
      <h1>
        <a href="index.html" title="">Основы геоинформатики: практикум в ArcGIS</a>
      </h1>
      <button class="btn btn-outline-primary d-lg-none ml-2 mt-1" type="button" data-toggle="collapse" data-target="#main-nav" aria-expanded="true" aria-controls="main-nav"><i class="fas fa-bars"></i><span class="sr-only">Show table of contents</span></button>
    </div>

    <div id="main-nav" class="collapse-lg">
      <form role="search">
        <input id="search" class="form-control" type="search" placeholder="Search" aria-label="Search">
</form>

      <nav aria-label="Table of contents"><h2>Table of contents</h2>
        <ul class="book-toc list-unstyled">
<li><a class="" href="index.html">Введение</a></li>
<li class="book-part">Визуализация данных</li>
<li><a class="" href="map-design-quaternary.html"><span class="header-section-number">1</span> Карта четвертичных отложений</a></li>
<li><a class="" href="map-design-general.html"><span class="header-section-number">2</span> Общегеографическая карта</a></li>
<li><a class="" href="map-design-climates.html"><span class="header-section-number">3</span> Климатическая карта</a></li>
<li><a class="" href="map-design-economic.html"><span class="header-section-number">4</span> Социально-экономическая карта</a></li>
<li class="book-part">Базовые технологии ГИС</li>
<li><a class="" href="map-ref-general.html"><span class="header-section-number">5</span> Привязка и векторизация (туристская карта)</a></li>
<li><a class="" href="map-ref-hydrogeologic.html"><span class="header-section-number">6</span> Привязка и векторизация (гидрогеологическая карта)</a></li>
<li><a class="" href="map-ref-economic.html"><span class="header-section-number">7</span> Привязка и векторизация (административная карта)</a></li>
<li><a class="" href="stat-map-economic.html"><span class="header-section-number">8</span> Соединение табличных данных</a></li>
<li><a class="" href="geocoding.html"><span class="header-section-number">9</span> Адресное геокодирование</a></li>
<li class="book-part">Векторный анализ</li>
<li><a class="" href="overlay.html"><span class="header-section-number">10</span> Пространственные взаимосвязи</a></li>
<li><a class="" href="land-cover-hydro.html"><span class="header-section-number">11</span> Пространственные соотношения</a></li>
<li><a class="" href="network-analysis.html"><span class="header-section-number">12</span> Транспортные сети</a></li>
<li><a class="" href="network-hydro.html"><span class="header-section-number">13</span> Гидрографические сети</a></li>
<li class="book-part">Растровый анализ</li>
<li><a class="active" href="weighted-overlay.html"><span class="header-section-number">14</span> Оптимизация местоположения</a></li>
<li><a class="" href="dem.html"><span class="header-section-number">15</span> Цифровое моделирование рельефа</a></li>
<li class="book-part">Пространственное моделирование</li>
<li><a class="" href="density-analysis.html"><span class="header-section-number">16</span> Оценка плотности распределения</a></li>
<li><a class="" href="interpolation.html"><span class="header-section-number">17</span> Пространственная интерполяция</a></li>
<li><a class="" href="threed-modelling.html"><span class="header-section-number">18</span> Трехмерное моделирование</a></li>
<li class="book-part">Описание функций</li>
<li><a class="" href="manual-catalog.html"><span class="header-section-number">A</span> Работа с окном каталога</a></li>
<li><a class="" href="manual-toolbox.html"><span class="header-section-number">B</span> Геообработка</a></li>
<li><a class="" href="manual-gdb.html"><span class="header-section-number">C</span> База геоданных</a></li>
<li><a class="" href="manual-toc.html"><span class="header-section-number">D</span> Работа с таблицей слоев</a></li>
<li><a class="" href="manual-toolbar.html"><span class="header-section-number">E</span> Панели инструментов</a></li>
<li><a class="" href="manual-navigation.html"><span class="header-section-number">F</span> Навигация по карте</a></li>
<li><a class="" href="manual-vector.html"><span class="header-section-number">G</span> Оформление векторного слоя</a></li>
<li><a class="" href="manual-raster.html"><span class="header-section-number">H</span> Оформление растрового слоя</a></li>
<li><a class="" href="manual-labels.html"><span class="header-section-number">I</span> Подписи объектов</a></li>
<li><a class="" href="manual-attributes.html"><span class="header-section-number">J</span> Атрибутивная таблица</a></li>
<li><a class="" href="manual-select.html"><span class="header-section-number">K</span> Выборка объектов</a></li>
<li><a class="" href="manual-projections.html"><span class="header-section-number">L</span> Проекции и координатная сетка</a></li>
<li><a class="" href="manual-georef.html"><span class="header-section-number">M</span> Привязка растровых данных</a></li>
<li><a class="" href="manual-edit.html"><span class="header-section-number">N</span> Редактирование</a></li>
<li><a class="" href="manual-layout.html"><span class="header-section-number">O</span> Компоновка карт</a></li>
<li><a class="" href="manual-legend.html"><span class="header-section-number">P</span> Легенда карты</a></li>
<li><a class="" href="manual-export.html"><span class="header-section-number">Q</span> Экспорт изображения</a></li>
</ul>

        <div class="book-extra">
          
        </div>
      </nav>
</div>
  </header><main class="col-sm-12 col-md-9 col-lg-7" id="content"><div id="weighted-overlay" class="section level1" number="14">
<h1>
<span class="header-section-number">Упражнение 14</span> Оптимизация местоположения<a class="anchor" aria-label="anchor" href="#weighted-overlay"><i class="fas fa-link"></i></a>
</h1>
<p><a href="http://autolab.geogr.msu.ru/gis/data/Ex14.zip">Скачать данные и файл отчета</a></p>
<div id="weighted-overlay-intro" class="section level2" number="14.1">
<h2>
<span class="header-section-number">14.1</span> Введение<a class="anchor" aria-label="anchor" href="#weighted-overlay-intro"><i class="fas fa-link"></i></a>
</h2>
<p><strong>Цель</strong> — овладеть основами растрового анализа в ГИС на примере решения задачи поиска оптимального местоположения для размещения объектов.</p>
<div class="inline-table"><table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Теоретическая подготовка</em></td>
<td>Растровая модель пространственных данных, вычисление евклидова расстояния на плоскости, методы классификации числовых рядов, оверлей с весовыми коэффициентами (взвешенный оверлей).</td>
</tr>
<tr class="even">
<td align="left"><em>Практическая подготовка</em></td>
<td>Знание основных компонент интерфейса ArcGIS Desktop (каталог, таблица содержания, карта). Инструменты геообработки. Работы с базой пространственных данных. Настройка символики и подписей объектов. Базовые технологии ГИС (пространственные и атрибутивные запросы, оверлей).</td>
</tr>
<tr class="odd">
<td align="left"><em>Исходные данные</em></td>
<td>База данных ГИС «Сатино».</td>
</tr>
<tr class="even">
<td align="left"><em>Результат</em></td>
<td>Слой базы пространственных данных, содержащий участок с наиболее оптимальной суммой критериев</td>
</tr>
<tr class="odd">
<td align="left"><em>Ключевые слова</em></td>
<td>Классификация числовых рядов, растровая модель данных, взвешенный оверлей, евклидово расстояние.</td>
</tr>
</tbody>
</table></div>
<div id="weighted-overlay-control" class="section level3" number="14.1.1">
<h3>
<span class="header-section-number">14.1.1</span> Контрольный лист<a class="anchor" aria-label="anchor" href="#weighted-overlay-control"><i class="fas fa-link"></i></a>
</h3>
<ul>
<li>Конвертировать слой землепользования в растровое представление</li>
<li>Построить и классифицировать растр углов наклона рельефа</li>
<li>Построить и классифицировать растры расстояний до водотоков и домов</li>
<li>Осуществить взвешенный оверлей полученных растров</li>
<li>Конвертировать класс с максимальной суммой баллов в векторное представление и выбрать участок, удовлетворяющий критерию минимальной площади.</li>
</ul>
</div>
<div id="weighted-overlay-annotation" class="section level3" number="14.1.2">
<h3>
<span class="header-section-number">14.1.2</span> Аннотация<a class="anchor" aria-label="anchor" href="#weighted-overlay-annotation"><i class="fas fa-link"></i></a>
</h3>
<p>В первых заданиях вы познакомились с редактированием векторных данных. Для ряда практических задач более удобным оказывается растровое представление. Оно хорошо подходит для анализа географического пространства, которое обладает постоянно меняющимися характеристиками среды. Растровая модель топологически неразрывна, что позволяет моделировать различные поля и перенос вещества в пространстве из одной ячейки в другую. В силу своей регулярности растровая модель проста в обработке, поскольку все операции можно унифицировать, ориентируясь на матрицу ячеек. В частности, к растровым слоям удобно применять операции алгебры карт, такие как сложение, вычитание, суммирование — что и используется данном задании.</p>
<p>Вам предстоит решить задачу выбора оптимального местоположения участка для строительства производственного объекта. Критерии выбора следующие:</p>
<ul>
<li><p>оптимальные зоны для размещения — открытые пространства, такие как выгоны, пустыри, луга, вырубки и т.д;</p></li>
<li><p>предельный угол наклона рельефа — <em>12,5°</em>;</p></li>
<li><p>участок должен располагаться в непосредственной близости от автомобильных дорог;</p></li>
<li><p>участок должен располагаться в непосредственной близости от крупных водотоков, поскольку требуется водоснабжение;</p></li>
<li><p>необходимая площадь участка — не менее <em>30 000 м<sup>2</sup></em>.</p></li>
</ul>
<p>Таким образом, в анализе участвует 5 факторов: тип землепользования, углы наклона рельефа, расстояние до автодорог, расстояние до водотоков, площадь участка. Поскольку расстояния и углы наклона меняются в пространстве непрерывно, для их анализа удобно использовать растровое представление. К нему же необходимо привести типы землепользования, применив векторно-растровое преобразование. Каждый из полученных слоев далее следует классифицировать по балльной шкале от <em>1</em> до <em>10</em> и затем получить взвешенную сумму баллов по всей территории. Оптимальное местоположение будет соответствовать участкам с максимальной суммой баллов. Среди них необходимо удовлетворяющие критерию минимальной площади.</p>
<p>Для выполнения анализа и преобразований данных вы будете использовать
инструменты <em>геообработки</em>.</p>
<blockquote>
<p><strong>Геообработка (geoprocessing)</strong> в терминологии ArcGIS — это анализ и преобразование пространственных данных. Инструменты геообработки находятся в ArcToolbox, где они сгруппированы по функциональному назначению.</p>
</blockquote>
</div>
</div>
<div id="weighted-overlay-workspace" class="section level2" number="14.2">
<h2>
<span class="header-section-number">14.2</span> Подготовка рабочего пространства<a class="anchor" aria-label="anchor" href="#weighted-overlay-workspace"><i class="fas fa-link"></i></a>
</h2>
<p><a href="weighted-overlay.html#weighted-overlay">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Скопируйте папку <em>Ex14</em> из каталога упражнений на сервере в свой локальный рабочий каталог на диске <em>D</em> с помощью <strong>Проводника</strong>. Раскройте ее после копирования на своем компьютере.</p></li>
<li><p>Откройте документ под названием <em>Ex14_Selection.mxd</em>.</p></li>
<li><p>Создайте новую базу геоданных. Для этого откройте окно <strong>ArcCatalog</strong>, правой кнопкой мыши щелкните вверху по вашей папке <em>Ex14</em> и выберите <strong>New &gt; File Geodatabase</strong>.</p></li>
<li><p>Назовите ее <em>Ex14.gdb</em>.</p></li>
<li><p>Щелкните по <em>Ex14.gdb</em> правой кнопкой мыши и выберите пункт <strong>Make Default Geodatabase</strong>. Эта команда указывает приложению, что все результаты автоматической обработки данных следует помещать в выбранную базу геоданных.</p></li>
</ol>
</div>
<div id="weighted-overlay-rasterize" class="section level2" number="14.3">
<h2>
<span class="header-section-number">14.3</span> Преобразование слоя типов землепользования в растровое представление<a class="anchor" aria-label="anchor" href="#weighted-overlay-rasterize"><i class="fas fa-link"></i></a>
</h2>
<p><a href="#%D0%B2%D1%8B%D0%B1%D0%BE%D1%80-%D0%BE%D0%BF%D1%82%D0%B8%D0%BC%D0%B0%D0%BB%D1%8C%D0%BD%D0%BE%D0%B3%D0%BE-%D0%BC%D0%B5%D1%81%D1%82%D0%BE%D0%BF%D0%BE%D0%BB%D0%BE%D0%B6%D0%B5%D0%BD%D0%B8%D1%8F">В начало упражнения ⇡</a></p>
<p>Поскольку в анализе будут участвовать растровые слои с различными расстояниями и углами наклонов, необходимо и данные по землепользованию привести к растровому виду.</p>
<ol style="list-style-type: decimal">
<li><p>Найдите в базе геоданных <em>Satino.gdb</em> слой <em>LandUse</em> в группе <em>Thematic</em> и перенесите его в таблицу содержания карты.</p></li>
<li><p>Визуализируйте слой <em>Землепользование</em> способом категорий, используя поле <em>Тип участка (Land_Type)</em>. Выбирать цвета не требуется, т.к. далее вы будете использовать растровый слой.</p></li>
<li>
<p>Диалоговое окно примет вид, аналогичный представленному на рисунке.</p>
<div class="figure">
<img src="images/Ex14/image2.png" alt=""><p class="caption">Рис. 1. Настройка способа изображения для типов землепользования</p>
</div>
</li>
<li><p>Нажмите <strong>ОК</strong>, чтобы завершить настройку способа изображения.</p></li>
<li><p>Откройте <strong>ArcToolbox</strong> с помощью кнопки <img src="images/Ex14/image3.png"> на панели инструментов.</p></li>
<li><p>Запустите инструмент <strong>Conversion Tools &gt; To Raster &gt; Polygon to Raster</strong>.</p></li>
<li>
<p>Заполните его параметры следующим образом:</p>
<table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Input Features</em></td>
<td>Землепользование</td>
</tr>
<tr class="even">
<td align="left"><em>Value Field</em></td>
<td>Land_Type</td>
</tr>
<tr class="odd">
<td align="left"><em>Output Raster Dataset</em></td>
<td><code>&lt;Фамилия&gt;\Ex14\Ex14.gdb\LandUse_R</code></td>
</tr>
<tr class="even">
<td align="left"><em>Cellsize</em></td>
<td>2,5</td>
</tr>
</tbody>
</table>
<p>В поле <strong>Output point features</strong> вам потребуется заменить только название класса объектов (<em>LandUse_R</em>).</p>
<p>Диалог примет следующий вид:</p>
<div class="inline-figure"><img src="images/Ex14/image4.png"></div>
<p>После завершения работы инструмента конвертации в таблицу содержания добавится новый слой.</p>
</li>
<li><p>Выделите его, нажмите <kbd>F2</kbd> и переименуйте в <em>Землепользование (растр)</em>.</p></li>
<li><p>Дважды щелкните по созданному слою и перейдите на вкладку <strong>Symbology</strong>.</p></li>
<li><p>Смените поле отображения <strong>Value field</strong> на <em>Land_type</em>. В легенду автоматически подставятся все найденные значения. Присвойте классам подходящие цвета в соответствии с их типом.</p></li>
<li><p>Удалите векторный слой <em>Землепользование</em> из таблицы содержания. Далее в этом упражнении он не понадобится.</p></li>
<li><p>Нажмите <strong>ОК</strong>. Переместите растровый слой наверх и нажмите кнопку <img src="images/Ex14/image5.png">. Окно карты примет вид, аналогичный представленному на рисунке:</p></li>
</ol>
<div class="figure">
<img src="images/Ex14/image6.png" alt=""><p class="caption">Рис. 3. Визуализация типов землепользования в растровом виде</p>
</div>
<p><kbd><strong>Снимок экрана №1.</strong> Растровый слой типов землепользования</kbd></p>
<blockquote>
<p>Увеличьте масштаб до величины порядка 1:2 000. Изучите отличия векторного и растрового слоя, поочередно отключая и включая векторный слой. Чем они отличаются?</p>
</blockquote>
</div>
<div id="weighted-overlay-slopes" class="section level2" number="14.4">
<h2>
<span class="header-section-number">14.4</span> Расчет углов наклона<a class="anchor" aria-label="anchor" href="#weighted-overlay-slopes"><i class="fas fa-link"></i></a>
</h2>
<p><a href="weighted-overlay.html#weighted-overlay">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Найдите слой <em>DEM</em> в базе геоданных <em>Satino.gdb</em> и перенесите его в таблицу содержания карты. Поместите его вниз таблицы содержания под слой <em>Землепользование (растр)</em>.</p></li>
<li>
<p>Запустите инструмент вычисления углов наклона <strong>Spatial Analyst Tools &gt; Surface &gt; Slope</strong> и заполните его параметры следующим образом:</p>
<table class="table table-sm">
<thead><tr class="header">
<th align="left">Параметр</th>
<th>Значение</th>
</tr></thead>
<tbody>
<tr class="odd">
<td align="left"><em>Input Raster</em></td>
<td>DEM</td>
</tr>
<tr class="even">
<td align="left"><em>Output Raster</em></td>
<td><code>&lt;Фамилия&gt;\Ex14\Ex14.gdb\Slope</code></td>
</tr>
</tbody>
</table>
<p>Остальные параметры в диалоге оставьте по умолчанию. Его окно примет вид, аналогичный представленному на рисунке:</p>
<div class="figure">
<img src="images/Ex14/image7.png" alt=""><p class="caption">Рис. 6. Инструмент Slope для вычисления углов наклона</p>
</div>
</li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить расчеты.</p></li>
<li><p>После того как слой углов наклона <em>Slope</em> добавится в таблицу содержания, переименуйте его в <em>Углы наклона</em>.</p></li>
</ol>
<p>Обратите внимание на то, что значения углов были классифицированы на несколько интервалов, которым был присвоен цвет:</p>
<div class="inline-figure"><img src="images/Ex14/image8.png"></div>
<p>Эта классификация является динамической (то есть, применяется при визуализации слоя и никак не отражается на его хранении) и при желании ее можно поменять ее на вкладке <strong>Symbology</strong> в свойствах слоя.</p>
</div>
<div id="weighted-overlay-distances" class="section level2" number="14.5">
<h2>
<span class="header-section-number">14.5</span> Расчет расстояний<a class="anchor" aria-label="anchor" href="#weighted-overlay-distances"><i class="fas fa-link"></i></a>
</h2>
<p><a href="weighted-overlay.html#weighted-overlay">В начало упражнения ⇡</a></p>
<div id="weighted-overlay-roads" class="section level3" number="14.5.1">
<h3>
<span class="header-section-number">14.5.1</span> Дороги<a class="anchor" aria-label="anchor" href="#weighted-overlay-roads"><i class="fas fa-link"></i></a>
</h3>
<p>Чтобы определить участки, наиболее подходящие с точки зрения транспортной доступности, можно построить растр, в каждой ячейке которого будет содержится расстояние (евклидово) до ближайшей дороги.</p>
<ol style="list-style-type: decimal">
<li><p>Добавьте на карту слой дорог <em>General/Roads</em> из базы геоданных <em>Satino</em>.</p></li>
<li>
<p>Откройте пункт меню <strong>Selection &gt; Select by attributes</strong>, выберите для выборки слой <em>Дороги и тропы</em> и в конструктор запроса введите следующее выражение:
<code>"Description" = 'Асфальтированные' OR "Description" = 'Проселочные'</code></p>
<p>Выборка позволит учитывать для при анализе только дороги (в слое также содержатся тропы). Окно запроса примет вид, аналогичный представленному на рисунке. Нажмите <strong>ОК</strong>:</p>
<div class="figure">
<img src="images/Ex14/image9.png" alt=""><p class="caption">Рис. 4. Выборка автомобильных дорог в диалоге атрибутивного запроса</p>
</div>
</li>
<li><p>Постройте растр расстояний для выбранных дорог. Для этого запустите инструмент <strong>Spatial Analyst Tools &gt; Distance &gt; Euclidian Distance</strong>.</p></li>
<li>
<p>Выберите в качестве параметра <strong>Input Raster or Feature</strong> слой <em>Roads</em>. Остальные параметры оставьте по умолчанию. Диалог примет следующий вид:</p>
<div class="inline-figure"><img src="images/Ex14/image10.png"></div>
</li>
<li><p>Нажмите <strong>ОК</strong>. Получившийся растр будет добавлен на карту. Переименуйте его в <em>Расстояния до дорог</em>.</p></li>
<li>
<p>Очистите выборку в слое дорог, нажав кнопку <img src="images/Ex14/image11.png"><strong>Clear Selected Features</strong> на панели инструментов <strong>Tools</strong>. Окно приложения примет следующий вид (обратите внимание на то, что расстояния были вычислены не для всех дорог, а только для выбранных):</p>
<div class="inline-figure"><img src="images/Ex14/image12.png"></div>
</li>
</ol>
</div>
<div id="weighted-overlay-streams" class="section level3" number="14.5.2">
<h3>
<span class="header-section-number">14.5.2</span> Водотоки<a class="anchor" aria-label="anchor" href="#weighted-overlay-streams"><i class="fas fa-link"></i></a>
</h3>
<p>Выполните расчет расстояний до водотоков самостоятельно, руководствуясь краткой схемой:</p>
<ol style="list-style-type: decimal">
<li><p>Добавить на карту слой G<em>eneral/WaterPolygon</em> (Гидрография (Полигоны))</p></li>
<li>
<p>Выбрать вручную крупные реки (Протва, Исьма) с помощью инструмента <img src="images/Ex14/image13.png"><strong>Select Features By Rectangle</strong> на панели инструментов <strong>Tools</strong>. Чтобы выбрать последовательно несколько объектов, вы можете зажать клавишу <kbd>Shift</kbd>:</p>
<div class="inline-figure"><img src="images/Ex14/image14.png"></div>
</li>
<li><p>Запустить инструмент <strong>Euclidian Distance</strong> для слоя <em>Гидрография (полигоны)</em>. Все параметры оставить по умолчанию.</p></li>
<li>
<p>Получившийся после расчетов слой переименовать в <em>Расстояния до водотоков</em>. Если все выполнено правильно, то результат должен быть примерно следующим:</p>
<div class="inline-figure"><img src="images/Ex14/image15.png"></div>
</li>
</ol>
</div>
</div>
<div id="weighted-overlay-slope-classes" class="section level2" number="14.6">
<h2>
<span class="header-section-number">14.6</span> Классификация углов наклона<a class="anchor" aria-label="anchor" href="#weighted-overlay-slope-classes"><i class="fas fa-link"></i></a>
</h2>
<p><a href="weighted-overlay.html#weighted-overlay">В начало упражнения ⇡</a></p>
<p>Поскольку в анализе будет участвовать несколько факторов, необходимо привести их значения к общей балльной шкале от <em>1</em> до <em>10</em>. Для этого используется классификация растра.</p>
<ol style="list-style-type: decimal">
<li><p>Запустите инструмент классификации <strong>Spatial Analyst Tools &gt; Reclass &gt; Reclassify</strong>.</p></li>
<li><p>Выберите в качестве <strong>Input raster</strong> слой <em>Углы наклона</em>.</p></li>
<li><p>Нажмите кнопку <strong>Classify…</strong>, чтобы настроить классы.</p></li>
<li>
<p>Раскройте список методов классификации вверху диалогового окна.</p>
<blockquote>
<p>Какие методы классификации доступны в инструменте Reclass? Какие принципы в них заложены? Попробуйте выбрать разные методы классификации и посмотрите, как меняются границы классов.</p>
</blockquote>
</li>
<li>
<p>Выберите режим естественных интервалов <em>Natural Breaks (Jenks)</em> и установите количество интервалов равным <em>10</em>. Окно диалога примет вид, аналогичный представленному на рисунке.</p>
<div class="figure">
<img src="images/Ex14/image16.png" alt=""><p class="caption">Рис. 5. Классификация значений углов наклона методом естественных интервалов</p>
</div>
<blockquote>
<p>Метод естественных интервалов минимизирует дисперсию внутри каждого класса и максимизирует отличия между классами.</p>
</blockquote>
</li>
<li><p>Нажмите <strong>ОК</strong>, чтобы завершить настройку метода классификации.</p></li>
<li><p>Нажмите кнопку <strong>Reverse new values</strong>, чтобы инвертировать значения классов (меньшие углы наклона должны иметь больший вес).</p></li>
<li>
<p>Остальные параметры оставьте по умолчанию. Окно диалога примет вид, аналогичный представленному на рисунке:</p>
<div class="figure">
<img src="images/Ex14/image17.png" alt=""><p class="caption">Рис. 6. Инструмент Reclassify</p>
</div>
</li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить выполнение инструмента.</p></li>
<li><p>После того как в таблицу содержания будет добавлен слой классифицированных углов наклона, переименуйте его в <em>Углы наклона (классы).</em></p></li>
<li>
<p>Через свойства слоя на вкладке <strong>Symbology</strong> присвойте классам шкалу от зеленого к красному, так чтобы класс 1 был красным, а класс 10 был зеленым. Если у вас получилось наоборот, нажмите мышкой на заголовке столбца <strong>Symbol</strong> и выберите в меню <strong>Flip Colors</strong> (сменить порядок цветов на противоположный):</p>
<div class="figure">
<img src="images/Ex14/image18.png" alt=""><p class="caption">Рис. 9. Функция Flip Colors</p>
</div>
</li>
<li>
<p>Нажмите <strong>ОК</strong> в диалоге свойств слоя, чтобы закрыть его. Изображение должно принять следующий вид:</p>
<div class="inline-figure"><img src="images/Ex14/image19.png"></div>
<p><kbd><strong>Снимок экрана №2.</strong> Классифицированные углы наклона</kbd></p>
</li>
<li><p>Сохраните документ карты.</p></li>
</ol>
</div>
<div id="weighted-overlay-distance-classes" class="section level2" number="14.7">
<h2>
<span class="header-section-number">14.7</span> Классификация расстояний<a class="anchor" aria-label="anchor" href="#weighted-overlay-distance-classes"><i class="fas fa-link"></i></a>
</h2>
<p><a href="weighted-overlay.html#weighted-overlay">В начало упражнения ⇡</a></p>
<div id="weighted-overlay-roads-classes" class="section level3" number="14.7.1">
<h3>
<span class="header-section-number">14.7.1</span> Дороги<a class="anchor" aria-label="anchor" href="#weighted-overlay-roads-classes"><i class="fas fa-link"></i></a>
</h3>
<ol style="list-style-type: decimal">
<li><p>Запустите инструмент <strong>Reclassify</strong>. Выберите в качестве <strong>Input raster</strong> слой <em>Расстояния до дорог</em>.</p></li>
<li><p>Нажмите кнопку <strong>Classify…</strong>, чтобы настроить классы.</p></li>
<li>
<p>Настройте метод классификации на <em>Geometric Intervals</em>, и установите число интервалов равным <em>10</em>. Метод геометрических интервалов позволяет сконцентрировать зоны с высокими баллами на небольшом расстоянии от дорог. Диалог настройки классификации примет вид, аналогичный представленному на рисунке. Нажмите <strong>ОК</strong>:</p>
<div class="figure">
<img src="images/Ex14/image20.png" alt=""><p class="caption">Рис. 11. Классификация расстояний до дорог методом геометрических интервалов</p>
</div>
</li>
<li><p>Нажмите кнопку <strong>Reverse New Values</strong>, чтобы инвертировать номера классов и максимальный балл получили классы с малыми расстояниями.</p></li>
<li>
<p>Переименуйте выходной класс в <em>Reclass_Euc_Roads</em>. Остальные параметры оставьте по умолчанию. Диалог инструмента примет вид, аналогичный представленному на рисунке:</p>
<div class="figure">
<img src="images/Ex14/image21.png" alt=""><p class="caption">Рис. 12. Инструмент Reclassify для классификации расстояний до дорог</p>
</div>
</li>
<li><p>Запустите вычисления, нажав кнопку <strong>ОК</strong>.</p></li>
<li><p>После того, как классифицированный растр расстояний до дорог появится на карте, переименуйте его в <em>Расстояния до дорог (классы)</em>.</p></li>
<li><p>Настройте отображение нового слоя на красно-зеленую шкалу, как обычно.</p></li>
<li><p>Удалите из таблицы содержания оригинальный слой <em>Расстояния до дорог</em>.</p></li>
</ol>
</div>
<div id="weighted-overlay-streams-classes" class="section level3" number="14.7.2">
<h3>
<span class="header-section-number">14.7.2</span> Водотоки<a class="anchor" aria-label="anchor" href="#weighted-overlay-streams-classes"><i class="fas fa-link"></i></a>
</h3>
<p>Выполните классификацию самостоятельно в соответствии со следующим планом:</p>
<ol style="list-style-type: decimal">
<li>
<p>Запустить инструмент <strong>Reclassify</strong> для слоя <em>Расстояния до водотоков</em>.</p>
<ul>
<li><p>В качестве метода классификации выбрать <em>Quantile</em> (квантили), число классов — <em>10</em>. Исправьте в столбце справа последнее значение на <em>2400</em>, чтобы заведомо включить максимум.</p></li>
<li><p>Инвертировать номера классов</p></li>
<li><p>Переименовать выходной слой в <em>Reclass_Euc_Water.</em></p></li>
</ul>
</li>
<li><p>Получившийся слой назвать <em>Расстояния до водотоков (классы)</em> и раскрасить в стандартной зелено-красной шкале.</p></li>
<li><p>Удалить из таблицы содержания оригинальный слой <em>Расстояния до водотоков</em>.</p></li>
<li><p>Снять выборку с объектов гидрографии.</p></li>
<li><p>Сохранить карту.</p></li>
</ol>
<p><kbd><strong>Снимок экрана №3.</strong> Классифицированный растр расстояний до водотоков</kbd></p>
</div>
</div>
<div id="weighted-overlay-combination" class="section level2" number="14.8">
<h2>
<span class="header-section-number">14.8</span> Нахождение мест с наилучшей комбинацией факторов с помощью взвешенного оверлея<a class="anchor" aria-label="anchor" href="#weighted-overlay-combination"><i class="fas fa-link"></i></a>
</h2>
<p><a href="weighted-overlay.html#weighted-overlay">В начало упражнения ⇡</a></p>
<p>Наилучшие участки соответствуют территориям, где сумма баллов по всем факторам максимальна. Соединение значений (в том числе и сложение) по нескольким слоям, располагающимся друг над другом, осуществляется с помощью растрового оверлея.</p>
<ol style="list-style-type: decimal">
<li><p>Запустите инструмент <strong>Spatial Analyst Tools &gt; Overlay &gt; Weighted Overlay</strong>.</p></li>
<li><p>Исправьте значения полей <strong>From</strong>, <strong>To</strong> и <strong>By</strong> на <em>1</em>, <em>10</em> и <em>1</em>, соответственно. Тем самым вы укажете, что необходимо полученные суммы ранжировать по баллам с <em>1</em> до <em>10</em> с шагом в <em>1</em> балл.</p></li>
<li><div class="inline-figure">Щелкните на кнопке <img src="images/Ex14/image22.png"> добавления слоя вверху диалога.</div></li>
<li>
<p>В появившемся диалоге выберите <em>Углы наклона (классы)</em> в списке <strong>Input Raster</strong>. Поле <strong>Input field</strong> поставьте по умолчанию. Нажмите <strong>ОК</strong>:</p>
<div class="figure">
<img src="images/Ex14/image23.png" alt=""><p class="caption">Рис. 13. Диалог выбора слоя для взвешенного оверлея</p>
</div>
<p>Обратите внимание на появившуюся таблицу: она выводит значения классов, взятые из слоя (столбец <em>Field</em>), и позволяет сменить их (столбец <em>Scale Value</em>) при выполнении оверлея.</p>
<p>Необходимо запретить строительство на участках с углами наклона более <em>12,5</em> градусов. Такие углы наклона возможны в классах <em>1-5</em> (в соответствии с проведенной классификацией).</p>
</li>
<li><p>Щелкните на ячейке поля <em>Scale Value</em> напротив <em>1</em> класса и выберите из списка значение <em>Restricted</em> (запрещен).</p></li>
<li>
<p>Повторите эту операцию для <em>2</em>, <em>3</em>, <em>4</em> и <em>5</em> класса. Диалог инструмента примет вид, аналогичный представленному на рисунке:</p>
<div class="figure">
<img src="images/Ex14/image24.png" alt=""><p class="caption">Рис. 14. Настройка параметров классов для слоя углов наклона рельефа</p>
</div>
</li>
<li><p>Добавьте в таблицу оверлея слои <em>Расстояния до дорог (классы)</em> и <em>Расстояния до водоемов (классы)</em> с помощью кнопки <img src="images/Ex14/image22.png">. Не меняйте значения классов в таблице.</p></li>
<li>
<div class="inline-figure">Сверните таблицы классов, нажав кнопку <img src="images/Ex14/image25.png"> в начале каждой строки. Диалог примет следующий вид:</div>
<div class="figure">
<img src="images/Ex14/image26.png" alt=""><p class="caption">Рис. 15. Диалог взвешенного оверлея после добавления первых трех слоев.</p>
</div>
</li>
<li>
<p>Добавьте в таблицу оверлея слой <em>Землепользование (растр)</em>. Однако на этот раз выберите для него в качестве поля со значениями классов <em>Land_Type</em>:</p>
<div class="figure">
<img src="images/Ex14/image27.png" alt=""><p class="caption">Рис. 16. Добавление в таблицу оверлея слоя Землепользование (растр).</p>
</div>
</li>
<li>
<p>Присвойте различным классам земель веса соответственно <strong>Рис. 17</strong>. Обратите внимание на то, что больший вес имеют территории, более доступные для размещения площадки. Заболоченные земли и объекты гидрографии необходимо запретить для выбора, указав им класс <em>Restricted</em>. В эту же категорию попадают участки, где нет данных.</p>
<div class="figure">
<img src="images/Ex14/image28.png" alt=""><p class="caption">Рис. 17. Настройка значений класса пригодности для слоя Землепользование (растр)</p>
</div>
<p>Осталось определиться с тем, какие факторы будут иметь максимальный вес. Заказчик решил, что приоритет в наборе факторов следует отдать близости к автодорогам. Среди остальных факторов меньше внимания можно уделить углам наклона рельефа, поскольку они уже были ограничены параметром <em>Restricted</em>.</p>
</li>
<li>
<p>Заполните веса в колонке <em>%Influence</em> следующим образом:</p>
<ul>
<li><p>Углы наклона — <em>15</em></p></li>
<li><p>Расстояния до дорог — <em>35</em></p></li>
<li><p>Расстояния до водоемов — <em>20</em></p></li>
<li><p>Землепользование — <em>30</em>.</p></li>
</ul>
<p>После заполнения весов диалог примет вид, аналогичный представленному на рисунке:</p>
<div class="figure">
<img src="images/Ex14/image29.png" alt=""><p class="caption">Рис. 18. Диалог инструмента Weighted Overlay после окончательной настройки параметров</p>
</div>
</li>
<li><p>Нажмите <strong>ОК</strong>, чтобы запустить вычисления.</p></li>
<li><p>После того, как результат оверлея будет добавлен в таблицу содержания, переименуйте слой в <em>Комбинация факторов</em>.</p></li>
<li><p>Примените к полученному слою стандартную красно-зеленую шкалу.</p></li>
</ol>
<blockquote>
<p>Изучите получившееся изображение. Насколько оно отвечает тем требованиям, которые выдвигались при анализе факторов? Отмечается ли близость темно-зеленых участков в дорогам, водоемам? Каким цветом закрашены участки с крутыми склонами?</p>
</blockquote>
</div>
<div id="weighted-overlay-conversion" class="section level2" number="14.9">
<h2>
<span class="header-section-number">14.9</span> Конвертация результирующих зон в векторный формат<a class="anchor" aria-label="anchor" href="#weighted-overlay-conversion"><i class="fas fa-link"></i></a>
</h2>
<p><a href="weighted-overlay.html#weighted-overlay">В начало упражнения ⇡</a></p>
<p>В качестве потенциальных мест на размещение площадки следует выбрать 10-балльные участки. Затем можно конвертировать эти участки в векторный формат, чтобы получить границы.</p>
<ol style="list-style-type: decimal">
<li><p>Откройте атрибутивную таблицу слоя комбинаций и выделите строку со значением <em>10</em>. Пикселы этого классы подсветятся на карте.</p></li>
<li><p>Запустите инструмент <strong>Conversion Tools &gt; From Raster &gt; Raster to Polygon</strong>.</p></li>
<li><p>Выберите в качестве входного слой <em>Комбинация факторов</em> и нажмите <strong>ОК</strong>.</p></li>
<li><p>Переименуйте получившийся слой в <em>Потенциальные участки</em>. Обратите внимание, что полигональные объекты были построены только для тех пикселов, которые вы выделили на экране.</p></li>
<li><p>Смените цвет выделенных полигонов на ярко-желтый и нажмите кнопку <img src="images/Ex14/image5.png"><strong>Full extent</strong>, чтобы вся карта поместилась на экран.</p></li>
</ol>
<div id="weighted-overlay-area" class="section level3" number="14.9.1">
<h3>
<span class="header-section-number">14.9.1</span> Выбор участков, имеющих необходимую площадь<a class="anchor" aria-label="anchor" href="#weighted-overlay-area"><i class="fas fa-link"></i></a>
</h3>
<p>Для выбора участков по площади следует использовать атрибутивный запрос</p>
<ol style="list-style-type: decimal">
<li><p>Откройте пункт меню <strong>Selection &gt; Select by attributes</strong>, выберите для выборки слой <em>Потенциальные участки.</em></p></li>
<li>
<p>В конструктор запроса введите следующее выражение:
<code>"Shape_Area" &gt; 30000</code></p>
<p>Нажмите <strong>ОК</strong>. Результат вашей работы должен быть похож на рисунок ниже:</p>
<div class="figure">
<img src="images/Ex14/image30.png" alt=""><p class="caption">Рис. 19. Результат анализа: ярко-желтые полигоны участков, оптимальные для строительства. Выделен полигон, имеющий необходимую площадь более 30 000 м<sup>2</sup></p>
</div>
<p><kbd><strong>Снимок экрана №4.</strong> Результат анализа: выбранный участок</kbd></p>
</li>
<li><p>Сохраните документ карты.</p></li>
</ol>
</div>
</div>
<div id="weighted-overlay-questions" class="section level2" number="14.10">
<h2>
<span class="header-section-number">14.10</span> Контрольные вопросы<a class="anchor" aria-label="anchor" href="#weighted-overlay-questions"><i class="fas fa-link"></i></a>
</h2>
<p><a href="weighted-overlay.html#weighted-overlay">В начало упражнения ⇡</a></p>
<ol style="list-style-type: decimal">
<li><p>Чем растровое представление данных отличается от векторного? Почему мы использовали растр представления расстояний?</p></li>
<li><p>Что вычисляет инструмент Euclidian Distance? Что означает величина в каждой ячейке растра по результатам его выполнения?</p></li>
<li><p>В чем смысл реклассификации растра? Для чего ее можно использовать?</p></li>
<li><p>Как работает взвешенный оверлей?</p></li>
</ol>
</div>
</div>
  <div class="chapter-nav">
<div class="prev"><a href="network-hydro.html"><span class="header-section-number">13</span> Гидрографические сети</a></div>
<div class="next"><a href="dem.html"><span class="header-section-number">15</span> Цифровое моделирование рельефа</a></div>
</div></main><div class="col-md-3 col-lg-2 d-none d-md-block sidebar sidebar-chapter">
    <nav id="toc" data-toggle="toc" aria-label="On this page"><h2>On this page</h2>
      <ul class="nav navbar-nav">
<li><a class="nav-link" href="#weighted-overlay"><span class="header-section-number">14</span> Оптимизация местоположения</a></li>
<li>
<a class="nav-link" href="#weighted-overlay-intro"><span class="header-section-number">14.1</span> Введение</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#weighted-overlay-control"><span class="header-section-number">14.1.1</span> Контрольный лист</a></li>
<li><a class="nav-link" href="#weighted-overlay-annotation"><span class="header-section-number">14.1.2</span> Аннотация</a></li>
</ul>
</li>
<li><a class="nav-link" href="#weighted-overlay-workspace"><span class="header-section-number">14.2</span> Подготовка рабочего пространства</a></li>
<li><a class="nav-link" href="#weighted-overlay-rasterize"><span class="header-section-number">14.3</span> Преобразование слоя типов землепользования в растровое представление</a></li>
<li><a class="nav-link" href="#weighted-overlay-slopes"><span class="header-section-number">14.4</span> Расчет углов наклона</a></li>
<li>
<a class="nav-link" href="#weighted-overlay-distances"><span class="header-section-number">14.5</span> Расчет расстояний</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#weighted-overlay-roads"><span class="header-section-number">14.5.1</span> Дороги</a></li>
<li><a class="nav-link" href="#weighted-overlay-streams"><span class="header-section-number">14.5.2</span> Водотоки</a></li>
</ul>
</li>
<li><a class="nav-link" href="#weighted-overlay-slope-classes"><span class="header-section-number">14.6</span> Классификация углов наклона</a></li>
<li>
<a class="nav-link" href="#weighted-overlay-distance-classes"><span class="header-section-number">14.7</span> Классификация расстояний</a><ul class="nav navbar-nav">
<li><a class="nav-link" href="#weighted-overlay-roads-classes"><span class="header-section-number">14.7.1</span> Дороги</a></li>
<li><a class="nav-link" href="#weighted-overlay-streams-classes"><span class="header-section-number">14.7.2</span> Водотоки</a></li>
</ul>
</li>
<li><a class="nav-link" href="#weighted-overlay-combination"><span class="header-section-number">14.8</span> Нахождение мест с наилучшей комбинацией факторов с помощью взвешенного оверлея</a></li>
<li>
<a class="nav-link" href="#weighted-overlay-conversion"><span class="header-section-number">14.9</span> Конвертация результирующих зон в векторный формат</a><ul class="nav navbar-nav"><li><a class="nav-link" href="#weighted-overlay-area"><span class="header-section-number">14.9.1</span> Выбор участков, имеющих необходимую площадь</a></li></ul>
</li>
<li><a class="nav-link" href="#weighted-overlay-questions"><span class="header-section-number">14.10</span> Контрольные вопросы</a></li>
</ul>

      <div class="book-extra">
        <ul class="list-unstyled">
          
        </ul>
</div>
    </nav>
</div>

</div>
</div> <!-- .container -->

<footer class="bg-primary text-light mt-5"><div class="container"><div class="row">

  <div class="col-12 col-md-6 mt-3">
    <p>"<strong>Основы геоинформатики: практикум в ArcGIS</strong>" was written by Тимофей Самсонов. It was last built on 2023-01-04.</p>
  </div>

  <div class="col-12 col-md-6 mt-3">
    <p>This book was built by the <a class="text-light" href="https://bookdown.org">bookdown</a> R package.</p>
  </div>

</div></div>
</footer><!-- dynamically load mathjax for compatibility with self-contained --><script>
  (function () {
    var script = document.createElement("script");
    script.type = "text/javascript";
    var src = "true";
    if (src === "" || src === "true") src = "https://cdnjs.cloudflare.com/ajax/libs/mathjax/2.7.9/latest.js?config=TeX-MML-AM_CHTML";
    if (location.protocol !== "file:")
      if (/^https?:/.test(src))
        src = src.replace(/^https?:/, '');
    script.src = src;
    document.getElementsByTagName("head")[0].appendChild(script);
  })();
</script><script type="text/x-mathjax-config">const popovers = document.querySelectorAll('a.footnote-ref[data-toggle="popover"]');
for (let popover of popovers) {
  const div = document.createElement('div');
  div.setAttribute('style', 'position: absolute; top: 0, left:0; width:0, height:0, overflow: hidden; visibility: hidden;');
  div.innerHTML = popover.getAttribute('data-content');

  var has_math = div.querySelector("span.math");
  if (has_math) {
    document.body.appendChild(div);
    MathJax.Hub.Queue(["Typeset", MathJax.Hub, div]);
    MathJax.Hub.Queue(function() {
      popover.setAttribute('data-content', div.innerHTML);
      document.body.removeChild(div);
    })
  }
}
</script>
</body>
</html>
